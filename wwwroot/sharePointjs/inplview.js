function $_global_inplview(){if("undefined"==typeof g_all_modules)g_all_modules={};g_all_modules["inplview.js"]={version:{rmj:16,rmm:0,rup:24016,rpr:12006}};typeof spWriteProfilerMark=="function"&&spWriteProfilerMark("perfMarkBegin_inplview.js");g_SPGridInitInfo={};SPGridInitInfo.prototype={controllerId:undefined,gridSerializer:undefined,jsInitObj:undefined,showLoading:undefined,pagingInfo:undefined,initialized:false,selectedRows:null,fnCallback:null,stale:false,unfilteredHierarchyInfo:null};TranslatedCSRtoJsGridFieldData.prototype={value:undefined,localizedValue:undefined,localizedValueSetExplicitly:undefined};InplViewUtil={__namespace:true};InplViewUtil.SwapNode=function(a,b){return a.parentNode.replaceChild(b,a)};InplViewUtil.EncodeQueryStringAsHash=function(a){return a.replace(/-/g,"--").replace(/&/g,"-")};InplViewUtil.DecodeHashAsQueryString=function(a){return a.replace(/-/g,"&").replace(/&&/g,"-")};ServerData.prototype.GetValue=function(){return void 0};ServerData.prototype.DataValueKeys={SourceURL:"SourceUrl",CorrelationId:"CorrelationId",Status:"Status",AuthenticationRedirect:"AuthenticationRedirect",ResponseText:"ResponseText",SPRequestDuration:"SPRequestDuration",SPIisLatency:"SPIisLatency"};SelectedItem.prototype={id:undefined,fsObjType:undefined};CLVP_InitializePrototype();FocusInfo_InitializePrototype();focusAcc=null;SPListOperationType={Default:0,Sort:1,PagingRight:2,PagingLeft:3};inplview={CheckinSelectedItems:CheckinSelectedItems,CheckOutSingleItem:CheckOutSingleItem,CheckoutSelectedItems:CheckoutSelectedItems,DiscardCheckoutSelectedItems:DiscardCheckoutSelectedItems,CLVPFromCtx:CLVPFromCtx,InitAllClvps:InitAllClvps,HandleFilterReal:HandleFilterReal,OnClickFilterV4:OnClickFilterV4,RefreshInplViewUrl:RefreshInplViewUrl,RefreshInplViewUrlByContext:RefreshInplViewUrlByContext,CancelRefreshView:CancelRefreshView,CancelRefreshViewByContext:CancelRefreshViewByContext,HandleRefreshView:HandleRefreshView,HandleRefreshViewByContext:HandleRefreshViewByContext,STSNavigate2Real:STSNavigate2Real,DeleteSelectedItems:DeleteSelectedItems,DeleteSelectedItemsCore:DeleteSelectedItemsCore,ExpGroup:ExpGroup,STSNavigateToViewReal:STSNavigateToViewReal,CheckInSingleItemFromECB:CheckInSingleItemFromECB,RestoreAllClvpsNavigation:RestoreAllClvpsNavigation,RefreshPageTo:RefreshPageToEx};ListModule.Settings.SupportsInplHash&&AjaxNavAddNavigate(RestoreAllClvpsNavigation);InitAllClvps();typeof Sys!="undefined"&&Sys!=null&&typeof Sys.Application!="undefined"&&Sys.Application!=null&&typeof Sys.Application.notifyScriptLoaded=="function"&&Sys.Application.notifyScriptLoaded();NotifyScriptLoadedAndExecuteWaitingJobs("inplview.js");typeof spWriteProfilerMark=="function"&&spWriteProfilerMark("perfMarkEnd_inplview.js")}var g_SPGridInitInfo;function SPGridInitInfo(b,a,e,c,d){this.controllerId=b;this.gridSerializer=a;this.jsInitObj=e;this.showLoading=c;this.pagingInfo=d}function SPGridToggleAllItems(c){var b=g_SPGridInitInfo[c.view],a=window[b.controllerId];a.ToggleAllItems()}function SPGridMakeInplviewRequest(i,g,h,d,c,e,f){var b=new XMLHttpRequest,a=[];a.push(SP.Utilities.Utility.getLayoutsPageUrl("inplview.aspx"));a.push("?Cmd=");a.push(i);a.push("&List=");a.push(g);a.push("&View=");a.push(h);a.push("&IsXslView=TRUE&Grid=True");if(Boolean(d)){a.push("&");a.push(d)}else{if(c){a.push("&SortField=");a.push(escapeProperly(c.sortField));a.push("&SortDir=");a.push(c.isDescending?"Desc":"Asc")}Boolean(e)&&a.push(e)}b.open("POST",a.join(""),true);b.onreadystatechange=f(b);b.send(null)}function SPGridFetchData(c,i,f,h,g,b,a,d){var e=function(e){return function(){if(e.readyState==4&&!IsXhrAborted(e)){try{e.onreadystatechange=null}catch(m){}var g=e.responseText;if(e.status==601)throw g;if(d){var i=JSON.parse(g),k=JSON.parse(i.CSRData),h=SP.JsGrid.Deserializer.DeserializeFromJson(i.JSGridSchema,null),f;for(var l in g_ctxDict){f=g_ctxDict[l];if(f.listName==c)break}var j=f.ListSchema;TranslateCSRtoJsGrid(k,h,j,f);b(h)}else b(SP.JsGrid.Deserializer.DeserializeFromJson(g,null));typeof a=="function"&&a()}}},j=d?"GridCSRHybrid":"Grid";SPGridMakeInplviewRequest(j,c,i,f,h,g,e)}function SPGridFetchSchema(e,a,c){var d=g_SPGridInitInfo[a];d.stale=true;var b=function(a){return function(){if(a.readyState==4&&!IsXhrAborted(a)){try{a.onreadystatechange=null}catch(e){}var b=a.responseText;if(a.status==601)throw b;var d=JSON.parse(b);c(d)}}};SPGridMakeInplviewRequest("Schema",e,a,null,null,null,b)}function GetCtxFromView(c){var a=null;for(var d in g_ctxDict){var b=g_ctxDict[d];if(b.view==c){a=b;break}}return a}function RenderSPGridBody(b){AddPostRenderCallback(b,PostRenderSPGrid);var a=[];a.push('<tbody><tr><td><div id="spgridcontainer_');a.push(b.wpq);a.push('" style="display:none;" /></td></tr></tbody></table>');return a.join("")}function PostRenderAfterJSGridRender(a){a.enteringGridMode=false;typeof ProcessImn=="function"&&ProcessImn();SPClientRenderer._ExecuteRenderCallbacks(a,"OnPostRender")}function PostRenderSPGrid(b){if(!(window.OffSwitch==null||OffSwitch.IsActive("F94C46C3-55CD-4720-AF15-E78FD7915370"))){var c=window.modernJsGrid;if(c!=null&&c.InitFromRenderContext!=null){c.InitFromRenderContext(b);return}}var f=document.getElementById("js-listviewthead-"+b.wpq);if(f!=null)f.style.display="none";var e=document.getElementById("agg"+b.wpq);if(e!=null)e.style.display="none";var a=g_SPGridInitInfo[b.view],d=document.getElementById("spgridcontainer_"+b.wpq);d.style.width="100%";d.style.display="";EnsureScriptFunc("spgantt.js","SP.GanttControl",function(){EnsureScriptFunc("mquery.js","m$",function(){var c=SP.JsGrid.Deserializer.DeserializeFromJson(a.gridSerializer),e=function(h){var c=new SP.JsGrid.JsGridControl(d,a.showLoading);window[a.controllerId]=new SP.GanttControl;window[a.controllerId].Init(c,h,a.jsInitObj,a.pagingInfo);window.setTimeout(function(){c.Focus()},0);if((a.selectedRows==null||a.selectedRows.length==1)&&b.ListTemplateType==171){var f=a.selectedRows==null?c.GetTopRecordIndex():c.GetViewIndexOfRecord(a.selectedRows[0]),g=c.GetColumns();if(g.length>1&&g[0].columnKey=="Checkmark")c.SelectCellRange(f,f,1,1,false);else c.SelectRowRange(f,f,false)}else if(a.selectedRows!=null)for(var e=0;e<a.selectedRows.length;e++)c.SelectRowRangeByKey(a.selectedRows[e],a.selectedRows[e],e!=0);g_fAnimateListCSR=false;a.fnCallback!=null&&a.fnCallback(window[a.controllerId]);window.setTimeout(function(){PostRenderAfterJSGridRender(b)},0)};if(typeof b.ListSchema.group2=="string"||b.ListSchema.Collapse=="TRUE"||a.stale)SPGridFetchData(b.listName,b.view,b.clvp.PagingString(),null,null,e,null,b.IsClientRendering);else{if(a.unfilteredHierarchyInfo!=null)c.UnfilteredHierarchy=a.unfilteredHierarchyInfo;if(b.ListData.ForceNoHierarchy)c.UnfilteredHierarchy=null;TranslateCSRtoJsGrid(b.ListData,c,b.ListSchema,b);e(c)}})})}function TryRefreshGrid(a){ExitGrid(a,true,function(){var b=g_SPGridInitInfo[a];b.stale=true;InitGridFromView(a,false)})}function ExitGrid(f,h,e,g){var b=g_SPGridInitInfo[f],c=GetCtxFromView(f),d=window[b.controllerId],i=d.GetCLVPQString(),a=d.GetUnfilteredHierarchyMap();d.TryDispose(function(l){if(!(window.OffSwitch==null||OffSwitch.IsActive("7265707D-3E1D-4281-8FF2-B3AB155897ED"))&&PageMinimized()&&!g){parent.postMessage("ExitGrid","*");return}b.initialized=false;c.inGridMode=false;c.leavingGridMode=true;var j=null;if(l!=null&&l.markGridSerializerAsStale)b.stale=true;else if(a!=null){var d=[{Key:0}],f={"0":0},k=function(g){for(var e=0;e<g.length;e++){var b=g[e],c={};c.Key=Number(b);if(a[b].parentKey!=null){var h=f[a[b].parentKey];c.Parent=h}if(a[b].tag!=null)c.Tag=a[b].tag;f[b]=d.length;d.push(c);a[b].childKeys!=null&&k(a[b].childKeys)}};k(a[0].childKeys);j=d}window[b.controllerId]=null;b.unfilteredHierarchyInfo=j;var n=document.getElementById("js-listviewthead-"+c.wpq);if(n!=null)n.style.display="";var m=document.getElementById("agg"+c.wpq);if(m!=null)m.style.display="";!h&&c.clvp.RefreshPaging(i.toString());e!=null&&e()})}function receiveMessage(c){if(c.data==="ExitGrid"){var a,b=Object.keys(g_SPGridInitInfo);if(b.length>0){a=b[0];ExitGrid(a)}}}function InitGridFromView(b,a){SP.QoS.WriteUserEngagement("EnterInPlaceEditing");var d=g_SPGridInitInfo[b],e=GetCtxFromView(b);LoadCssOnDemand("jsgrid",c);a=false;if(typeof window.addEventListener!="undefined")window.addEventListener("message",receiveMessage,false);else typeof window.attachEvent!="undefined"&&window.attachEvent("onmessage",receiveMessage);function c(){InitGrid(d,e,a)}}function InitGrid(b,a,e){if(b.initialized)return;b.initialized=true;if(a==null||a.clvp==null)return;a.clvp.CancelAnyOutstandingRequest();a.inGridMode=true;a.enteringGridMode=true;b.jsInitObj.spCsrRenderCtx=a;b.jsInitObj.viewRootFolder=unescapeProperly(a.rootFolder);if(!e){var c=a.clvp.PagingString();a.queryString="?"+(c!=null?c:"");if(a.CurrentSelectedItems>0){b.selectedRows=[];for(var g in a.dictSel){var d=a.dictSel[g];b.selectedRows.push(d.id)}}var f={currentCtx:a,csrAjaxRefresh:true};AJAXRefreshView(f,SP.UI.DialogResult.OK)}}function TranslateCSRtoJsGrid(d,a,s,D){var e,c,f,m={},X,n,b,v,i,g,j={},O=s.Field,S=O.length,x={},t=a.Fields,T=t.length,r=null,H=d.Row,C=H.length,J=0,F=[],k=0,I=null,h=null,o=null,y=null,w=null,l=null,B=null,W=false,N=0,G=D==null;function Q(c,b){if(typeof d[b]=="string")if(d[b].substring(0,1)=="?")a.AdditionalParams[c]=d[b].substring(1);else{var e=d[b].split("?");a.AdditionalParams[c]=e[1]}else a.AdditionalParams[c]=null}Q("prevHref","PrevHref");Q("nextHref","NextHref");function R(c,b){if(typeof d[b]=="string")a.AdditionalParams[c]=Number(d[b]);else if(typeof d[b]=="number")a.AdditionalParams[c]=d[b];else a.AdditionalParams[c]=null}R("first","FirstRow");R("last","LastRow");if(typeof s.group1=="string"){k=1;h=s.group1;w=a.MetaData.GroupingPrefix;B=[];if(typeof s.group2=="string"){k=2;o=s.group2}a.MetaData.GroupingLevel=k;y=a.MetaData.GridOperationalConstantsFieldKeyMap[0]=a.Columns[0].fieldKey;delete a.RecordCount;delete a.TopRecord}for(c=0;c<T;c++){if(t[c].propertyTypeId=="SPUser"||t[c].propertyTypeId=="SPUser_MultiValue")t[c].hasDataValue=true;f=t[c];x[f.fieldKey]=f}for(c=0;c<S;c++){f=O[c];j[f.RealFieldName]=f}if(C>0){for(c=0,b=null;c<C&&(b==null||Boolean(b["CustomData."]));c++)b=H[c];for(e in b){i=TranslateCSRtoJsGridFieldName(e,j[e]);m[e]=i;if(j[e]!=null)m[j[e].Name]=i}if(typeof d.FilterLink=="string"){var U=d.FilterLink.substring(1),P=new QstringStruct(U),K={};for(var V in P.filterParams){var u=P.filterParams[V],p=null,q=null;if(u.FilterField!=null){p=u.FilterField;q=u.FilterValue}else{p=u.FilterFields;q=u.FilterValues}p=m[unescapeProperly(p)];q=unescapeProperly(q);if(p!=null)K[p]=q}a.AutoFilterState=K}}if(Boolean(d.SortField)){var z=m[d.SortField];if(z==null)z=d.SortField;a.SortState=[{fieldKey:z,isDescending:d.SortDir!="ascending"}]}a.LocalizedTable=[];a.UnlocalizedTable=[];for(c=0;c<C;c++){b=H[c];if(Boolean(b["CustomData."])){J++;continue}N++;if(k>0){var A=function(c,d,e){var a=e==2?"2":"";return w+b[c+".groupindex"+a]+"_"+d},M=function(c,e){var d;if(G){d=c+": "+String(b[c]);if(e==1)l=w+" "+c+":"+String(b[c]);else l=w+" "+h+":"+String(b[h])+" "+o+":"+String(b[o])}else{var f=document.createElement("div");if(e==1)f.innerHTML=RenderGroupEx(D,b,true);else{var i=b[h+".newgroup"];b[h+".newgroup"]="0";f.innerHTML=RenderGroup(D,b);b[h+".newgroup"]=i}d=GetInnerText(f);if(e==1)l=A(c,d,1);else l=A(h,d,1)+" "+A(o,d,2)}n={};g={ID:l,_GRPDESC:Number(b[c+".COUNT.group"+(e==2?"2":"")])};if(k==2)g._GRPLVL=e;if(e==2)I._GRPDESC++;else I=g;g[y]=n[y]=d;a.LocalizedTable.push(n);a.UnlocalizedTable.push(g);B.push(l);F.push(l)};b[h+".newgroup"]=="1"&&M(h,1);b[o+".newgroup"]=="1"&&M(o,2)}n={};g={};F.push(TranslateCSRtoJsGridField("ID",j.ID,b,x.ID).value);for(e in b){var E=j[e],L=E==null?null:m[E.Name];r=L==null?null:x[L];v=TranslateCSRtoJsGridField(e,E,b,r);if(v!=null){i=m[e];f=x[i];if(f!=null){if(f.hasLocalizedValue)n[i]=v.localizedValue;if(f.hasDataValue||k>0&&i=="Title")g[i]=v.value}}}if(!G)g.csrInfo=b;a.LocalizedTable.push(n);a.UnlocalizedTable.push(g)}if(!G)for(c=0;c<a.Fields.length;c++){r=a.Fields[c];r.csrInfo=j[r.fieldKey]}a.ViewInfo=F;if(k>0)a.ViewDepKeys=B;else a.RecordCount=N;a.AdditionalParams.last-=J}function TranslateCSRtoJsGridFieldName(b,a){var c=a!=null?a.FieldType:b;switch(c){case"ContentTypeId":return"_ContentTypeId";case"File_x0020_Type":return"DocIcon";case"PermMask":return"Edit"}return a!=null&&typeof a.RealFieldName=="string"?a.RealFieldName:b}function TranslatedCSRtoJsGridFieldData(b,a){this.value=b;if(a!=null){this.localizedValue=a;this.localizedValueSetExplicitly=true}else{this.localizedValue=b;this.localizedValueSetExplicitly=false}}function TranslateCSRtoJsGridField(b,h,c,f){var d,a=c[b];if(f!=null&&(f.propertyTypeId=="SPMultilineText"||f.propertyTypeId=="String"||f.propertyTypeId=="SPTextMaxLength"))a=STSHtmlDecode(a);var g=h!=null?h.FieldType:b;if(a==null)throw"CSR JSON did not contain a value for expected field "+b;if(g==null)return null;switch(g){case"Boolean":var t=b+".value";return a==null||a==""?null:new TranslatedCSRtoJsGridFieldData(c[t],a);case"Computed":if(b=="FileLeafRef"){EnsureFileLeafRefName(c);return new TranslatedCSRtoJsGridFieldData(null,c["FileLeafRef.Name"])}else if(h.Format=="Hyperlink")return k(b,a,c);break;case"File_x0020_Type":return a==""?null:new TranslatedCSRtoJsGridFieldData(null,a);case"ID":return new TranslatedCSRtoJsGridFieldData(Number(a),String(a));case"Lookup":case"LookupMulti":if(a=="")return null;if(typeof a=="string")return new TranslatedCSRtoJsGridFieldData(a);else{var o=a,m=[];a=null;for(d=0;d<o.length;d++){var p=o[d],n=p.lookupId,i=p.lookupValue;if(g=="Lookup")return new TranslatedCSRtoJsGridFieldData(n,i);if(a==null)a=i;else a=a+"; "+i;m.push(n)}}return new TranslatedCSRtoJsGridFieldData(m,a);case"MultiChoice":return m$.isArray(a)?new TranslatedCSRtoJsGridFieldData(a.join("; ")):new TranslatedCSRtoJsGridFieldData("");case"PermMask":var l=parseInt(a.substring(a.length-8),16)|0;c.Edit=l;return new TranslatedCSRtoJsGridFieldData(l);case"URL":return k(b,a,c);case"User":case"UserMulti":var q=c[b];a=[];var e="";for(d=0;d<q.length;d++){var j=q[d];if(e=="")e=j.title;else e=e+"; "+j.title;a.push(r(j))}return new TranslatedCSRtoJsGridFieldData(a,e);case"TaxonomyFieldType":case"TaxonomyFieldTypeMulti":if(typeof SP.UI!="undefined"&&typeof SP.UI.Taxonomy!="undefined"&&typeof SP.UI.Taxonomy.DataConverters!="undefined"&&typeof SP.UI.Taxonomy.DataConverters.DataValueToInputValue=="function"){var s=SP.UI.Taxonomy.DataConverters.DataValueToInputValue(a,g=="TaxonomyFieldTypeMulti");return new TranslatedCSRtoJsGridFieldData(a,s)}break;case"Location":return new TranslatedCSRtoJsGridFieldData(a?a.DisplayName:"")}if(a==null||a=="")return null;return new TranslatedCSRtoJsGridFieldData(a);function k(e,a,f){if(a==null||a=="")return null;var b=a,c=f[e+".desc"],d={display:c,address:b};return new TranslatedCSRtoJsGridFieldData(d)}function r(a){if(a==null||a=="")return null;var b={display:a.title,email:a.email};return b}}function CreateColumn(){EnsureScriptFunc("ribbon","SP.Ribbon.PageManager",function(){SP.Ribbon.PageManager.get_instance().executeRootCommand("CreateColumn")});return false}function GetSPGanttFromCtx(b){var a=g_SPGridInitInfo[b.view];return a==null?null:window[a.controllerId]}var AllViews;function ShowSaveAsNewViewDialog(f,g,h,b,a){var c=document.getElementById("CSRSaveAsNewViewAnchor"+h);if(Boolean(c)&&c.getAttribute("saveViewButtonDisabled")=="true")return;else Boolean(c)&&c.setAttribute("saveViewButtonDisabled","true");SP.QoS.WriteUserEngagement("SaveAsNewView_Click");SP.QoS.WriteStart("SaveAsNewView_Start_ShowDialog");var d=SP.ClientContext.get_current(),j=d.get_web(),i=d.get_web().get_lists().getById(f),e=i.get_views().getById(g);AllViews=i.get_views();d.load(AllViews);d.load(e);d.executeQueryAsync(function(){var k=document.createElement("DIV"),d=[];d.push(Strings.STS.L_SaveViewDlgMsg+"<br/>");d.push('<br/><input id="SaveAsNewViewName" style="width: 200px" type="text" value='+StAttrQuote(e.get_title())+" onkeyup=\"ValidateNewOrUpdatedView('");d.push(b+"', '"+a+"')\" /><br/>");d.push('<form id="SANVPrivacyForm"><br/>');d.push('<label for="SANVprivacy-public" style="display: block;"><input style="vertical-align: bottom;" type="radio" id="SANVprivacy-public" name="SANVprivacy" value="public" checked="checked" onclick="ValidateNewOrUpdatedView(\'');d.push(b+"', '"+a+'\')" disabled="true"/>');d.push(Strings.STS.L_SaveViewDlgPublicOpt);d.push("</label>");d.push('<label for="SANVprivacy-private" style="display: block;"><input style="vertical-align: bottom;" type="radio" id="SANVprivacy-private" name="SANVprivacy" value="personal" onclick="ValidateNewOrUpdatedView(\'');d.push(b+"', '"+a+'\')" disabled="true"/>');d.push(Strings.STS.L_SaveViewDlgPersonalOpt);d.push("</label></form><br/>");d.push('<div class="ms-core-form-bottomButtonBox">');d.push('<button id="ms-SaveBtnDismissDlg" class="ms-ButtonHeightWidth" ');d.push('value="save" onclick="DismissSaveAsNewViewDialog(this,\''+f+"', '"+g+"', '"+h+'\')" disabled="true">');d.push(Strings.STS.L_SaveButtonCaption);d.push("</button>");d.push('<button id="ms-CancelBtnDismissDlg" class="ms-ButtonHeightWidth" ');d.push('value="cancel" onclick="DismissSaveAsNewViewDialog(this,\''+f+"', '"+g+"', '"+h+"')\">");d.push(Strings.STS.L_CancelButtonCaption);d.push("</button>");d.push("</div>");k.innerHTML=d.join("");if(b=="true"&&a=="true")SP.QoS.WriteUserEngagement("SaveAsNewView_HasManagePublic");else if(b=="false"&&a=="true")SP.QoS.WriteUserEngagement("SaveAsNewView_HasManagePersonal");else SP.QoS.WriteUserEngagement("SaveAsNewView_HasManageNone");var l={html:k,title:Strings.STS.L_SaveViewDlgTitle,dialogReturnValueCallback:function(){Boolean(c)&&c.setAttribute("saveViewButtonDisabled","false")}},m=new SP.UI.ModalDialog.showModalDialog(l),i=document.getElementById("SaveAsNewViewName");if(Boolean(i))if(!e.get_personalView()&&b=="false"&&a=="true"||e.get_personalView()&&b=="true"&&a=="false")i.value="";ValidateNewOrUpdatedView(b,a);var j=document.getElementById("ms-CancelBtnDismissDlg");Boolean(j)&&j.focus();SP.QoS.WriteSuccess("SaveAsNewView_Success_ShowDialog")},function(){SP.QoS.WriteFailure("SaveAsNewView_Failure_ShowDialog");ULS.SendErrorMessageJS("inplview","ShowSaveAsNewViewDialog failed")})}function DismissSaveAsNewViewDialog(i,f,h,d){var c=SP.UI.ModalDialog.get_childDialog();if(Boolean(c)){var j=SP.UI.DialogResult.cancel;if(i.value=="save"){SP.QoS.WriteUserEngagement("SaveAsNewView_SaveClick");var b=document.getElementById("SaveAsNewViewName").value;if(GetExistingView(b)!=null){if(!confirm(StBuildParam(Strings.STS.L_SaveViewOverwriteDlgMsg,b))){SP.QoS.WriteUserEngagement("SaveAsNewView_CancelOverwriteClick");return}SP.QoS.WriteUserEngagement("SaveAsNewView_OverwriteExistingClick")}var e=document.getElementById("SANVPrivacyForm"),a=false;if(e[1].checked)a=true;SP.QoS.WriteUserEngagement("SaveAsNewView_Save"+(a?"Private":"Public"));var g={name:b,privacyOption:a};SaveThisView(f,h,g,c,d)}else{SP.QoS.WriteUserEngagement("SaveAsNewView_CancelClick");CloseSaveAsNewViewDialog(c,SP.UI.DialogResult.cancel,d)}}}function CloseSaveAsNewViewDialog(c,b,d){c.close(b);var a=document.getElementById("CSRSaveAsNewViewAnchor"+d);Boolean(a)&&a.setAttribute("saveViewButtonDisabled","false")}function GetExistingView(b){for(var a=0;a<AllViews.get_data().length;a++){var c=AllViews.get_data()[a].get_title();if(b==c)return AllViews.get_data()[a]}return null}function ValidateNewOrUpdatedView(d,c){var a=document.getElementById("SANVPrivacyForm");if(d=="true"&&c=="true"){a[0].disabled=false;a[1].disabled=false}else if(d=="false"&&c=="true"){a[0].checked=false;a[1].checked=true}if(AllViews==null)return;var k=document.getElementById("SaveAsNewviewErrorMsg"),g=document.getElementById("SaveAsNewViewName").value,e=document.getElementById("ms-SaveBtnDismissDlg"),b=GetExistingView(g);if(b!=null){var j=b.get_title();if(j==g){var i="public",h="personal";if(b.get_personalView()){i="personal";h="public"}if(d=="true"&&c=="true"){if(b.get_personalView()){a[0].checked=false;a[1].checked=true}else{a[0].checked=true;a[1].checked=false}a[0].disabled=true;a[1].disabled=true}var f=false;if(a[1].checked)f=true;if(b.get_personalView()!=f){e.disabled=true;return}else{e.disabled=false;return}}}e.disabled=false}function SaveThisView(h,i,e,c,j){SP.QoS.WriteStart("SaveAsNewView_Start_SaveView");var d=SP.ClientContext.get_current(),g=d.get_web().get_lists().getById(h),b=document.location.href;b=g.saveAsNewView(i,e.name,e.privacyOption,b);var f="SANVErrorMsg",a=document.getElementById(f);if(a!=null){a.parentNode.removeChild(a);c.autoSize()}d.load(g);d.executeQueryAsync(function(){SP.QoS.WriteSuccess("SaveAsNewView_Success_SaveView");c.set_returnValue(e);CloseSaveAsNewViewDialog(c,SP.UI.DialogResult.OK,j);b=b.get_value();Nav.navigate(b)},function(){SP.QoS.WriteFailure("SaveAsNewView_Failure_SaveView");var b=document.getElementById("SaveAsNewViewName");a=document.createElement("SPAN");a.id=f;a.className="ms-formvalidation sp-peoplepicker-errorMsg";a.innerHTML='<span role="alert">'+STSHtmlEncode(Strings.STS.L_ErrorSavingView)+"<br/></span>";if(b!=null&&b.parentNode!=null&&b.nextSibling!=null){b.parentNode.insertBefore(a,b.nextSibling.nextSibling);c.autoSize()}})}var InplViewUtil;function SetUrlKeyValue(b,e,f,a){if(a==null)a=window.location.href+"";var c=e,d=new URI(a,{disableEncodingDecodingForLegacyCode:true});a=d.getQuery();if(f)c=URI_Encoding.encodeURIComponent(c);if(a.indexOf(b+"=")<0){if(a.length>1)a+="&";else if(a.length==0)a+="?";a+=b+"="+c}else{var g=new RegExp(b+"=[^&]*");a=a.replace(g,b+"="+c)}d.setQuery(a);return d.getString()}function ServerData(){}function ServerConnection(){var b=null,a=null,c="json";this.abort=function(){if(b!=null){var c=b;c.isCancelled==true;b.abort();b=null}if(a!=null){a.Abort();a=null}};this.isRequestActive=function(){return Boolean(b)||Boolean(a)};this.getServerData=function(g,c,b,h,a,i){var e=g();return ListModule.Settings.SupportsDatapipes&&Flighting.VariantConfiguration.IsExpFeatureClientEnabled(216)?d(e,c,b,a):f(e,c,b,h,a,i)};function f(c,h,g,i,f,d){var a=new i;a.open("POST",c,true);if(d)a.setRequestHeader("Content-Type","application/json;odata=verbose");else a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(d)if(typeof MSOWebPartPageFormName!="undefined")a.setRequestHeader("x-requestdigest",document.forms[MSOWebPartPageFormName].__REQUESTDIGEST.value);else typeof pageDigest=="string"&&a.setRequestHeader("x-requestdigest",pageDigest);a.onreadystatechange=function(){e(a,c,h,g)};b=a;a.send(f);return void 0}var e=function(a,e,d,c){if(a.readyState!=4)return;this._currentXhrRequest=null;if(IsXhrAborted(a))return;if(typeof a.isCancelled!="undefined"&&a.isCancelled==true)return;var b=new ServerData;b.GetValue=function(f){var d=void 0,c=b;switch(f){case c.DataValueKeys.SourceURL:d=e;break;case c.DataValueKeys.CorrelationId:d=a.getResponseHeader("SPRequestGuid");break;case c.DataValueKeys.Status:try{d=a.status}catch(g){}break;case c.DataValueKeys.AuthenticationRedirect:d=a.getResponseHeader("X-Forms_Based_Auth_Required");break;case c.DataValueKeys.ResponseText:d=a.responseText;break;case c.DataValueKeys.SPRequestDuration:d=a.getResponseHeader(c.DataValueKeys.SPRequestDuration);break;case c.DataValueKeys.SPIisLatency:d=a.getResponseHeader(c.DataValueKeys.SPIisLatency)}return d};if(a.status===200)d(b);else c(b);try{a.onreadystatechange=null}catch(f){}};function d(e,j,i,f){var k=new g(e,j,i),l=new h(e,f),c="";if(typeof MSOWebPartPageFormName!="undefined")c=document.forms[MSOWebPartPageFormName].__REQUESTDIGEST.value;var m=new SPTouchData.DatapipeFactoryParameters("",c,"/"),n=new SPTouchData.DatapipeFactory(m),b=n.GetDatapipe(SPTouchData.DatapipeType.ObjectDatapipe);b.Initialize(l);b.SetCallbackObj(k);var d=b.CreateSession();d.GetData();a=d;return void 0}function g(e,d,b){this.OnDataAvailable=function(f){a=null;var b=new ServerData;b.GetValue=function(g){var a=void 0,d=b;switch(g){case d.DataValueKeys.SourceURL:a=e;break;case d.DataValueKeys.CorrelationId:a=void 0;break;case d.DataValueKeys.Status:a=200;break;case d.DataValueKeys.AuthenticationRedirect:a=void 0;break;case d.DataValueKeys.ResponseText:a=f.GetValue(c)}return a};d(b)};this.OnDataError=function(c){a=null;var d=new ServerData;d.GetValue=function(e){var a=void 0,b=d;switch(e){case b.DataValueKeys.SourceURL:a=c.Url;break;case b.DataValueKeys.CorrelationId:a=c.ServerCorrelationId;break;case b.DataValueKeys.Status:a=c.XHRResponseStatus;break;case b.DataValueKeys.AuthenticationRedirect:a=void 0;break;case b.DataValueKeys.ResponseText:a=c.ErrorMessage}return a};b(d)};this.OnPreAuthenticationRedirect=function(){return false}}function h(b,a){this.RestUrl=b;this.MakeData=function(a){return new i(a)};this.AdditionalHeaders={};this.HttpMethod="POST";this.IsWrite=false;this.PostBody=a}function i(a){this.GetValue=function(d){var b;if(d==c)b=JSON.stringify(a);return b}}}function SharePointListRestUrlBuilder(){var v;this.setHttpRoot=function(a){v=a};var x=false;this.setUseRest=function(a){x=a};var e=false;this.setIsClientRendering=function(a){e=a};var t=false;this.setIsEcbInfo=function(a){t=a};var g;this.setListName=function(a){g=a};var w;this.setListUrl=function(a){w=a};var d;this.setView=function(a){d=a};var y;this.setCtxId=function(a){y=a};var u=false;this.setIsXslView=function(a){u=a};var q;this.setOverrideSelectCommand=function(a){q=a};var c;this.setOverrideFilterQstring=function(a){c=a};var i;this.setOverrideScope=function(a){i=a};var f;this.setSearchTerm=function(a){f=a};var r=false;this.setIsFullListSearch=function(a){r=a};var h=false;this.setIsRealHttpRoot=function(a){h=a};var k;this.setRootFolder=function(a){k=a};var j;this.setInGridMode=function(a){j=a};var o;this.setCmd=function(a){o=a};var p=false;this.setShouldCascadeDeleteWarningMessage=function(a){p=a};var m;this.setWebPartID=function(a){m=a};var a;this.setGroupString=function(b){a=b};var b;this.setPagingParams=function(a){b=a};var l;this.setSortField=function(a){l=a};var n;this.setSortDir=function(a){n=a};var s=false;this.setIgnoreQString=function(a){s=a};var z="";this.setMountPointUrl=function(a){z=a};this.buildUrl=function(){var z=new URI(URI_Encoding.escapeUrlForCallback(v)),B=z.getPath();if(x)if(!h){if(Boolean(g))B+="/_api/web/lists/getById('"+g;else B+="/_api/web/GetList('"+w;z.setPath(B+"')/RenderListDataAsStream");Boolean(d)&&z.setQueryParameter("View",d)}else z.setPath(B+"/_api/SP.Requestcontext.Current/GetRemoteContext/list/RenderListDataAsStream");else{z.setPath(B+"/_layouts/15/inplview.aspx");z.setQueryParameter("List",g);d!=null&&z.setQueryParameter("View",d);z.setQueryParameter("ViewCount",y);u&&z.setQueryParameter("IsXslView","TRUE");e&&z.setQueryParameter("IsCSR","TRUE")}q&&z.setQueryParameter("HasOverrideSelectCommand","TRUE");var E=null;if(typeof c!="undefined")E=c.match(RegExp("OverrideScope=[^&]*"));typeof i!="undefined"&&E==null&&z.setQueryParameter("OverrideScope",i);typeof c!="undefined"&&D(z,c);if(e){var H=new URI(Nav.ajaxNavigate.get_href(),{disableEncodingDecodingForLegacyCode:true});z.setQueryParameter("ListViewPageUrl",URI_Encoding.encodeURIComponent(H.getStringWithoutQueryAndFragment(),false))}typeof f!="undefined"&&f!=null&&z.setQueryParameter("InplaceSearchQuery",URI_Encoding.encodeURIComponent(f,true));r&&z.setQueryParameter("InplaceFullListSearch","true");if(h){var F=ListModule.Util.makeMountedFolderQueryStrParams(true,false);D(z,F)}e&&t&&z.setQueryParameter("IsRibbon","TRUE");Boolean(k)&&z.setQueryParameter("RootFolder",URI_Encoding.encodeURIComponent(k,true));Boolean(o)&&z.setQueryParameter("Cmd",o);var C=false;if(Boolean(b))for(var A in b){if(A=="List"||A=="View"||A=="ID")continue;if(A=="ShowInGrid"){C=true;z.setQueryParameter("ShowInGrid",Boolean(j)?"True":"False")}else if(A=="GroupString"&&(Boolean(a)||a==""))z.setQueryParameter("GroupString",a);else z.setQueryParameter(A,b[A])}Boolean(j)&&!C&&z.setQueryParameter("ShowInGrid","True");Boolean(m)&&z.setQueryParameter("WebPartID",m);p&&z.setQueryParameter("CascDelWarnMessage","1");if(Boolean(a)||a==""){!b.hasOwnProperty("IsGroupRender")&&z.setQueryParameter("IsGroupRender","TRUE");z.setQueryParameter("DrillDown","1");!b.hasOwnProperty("GroupString")&&z.setQueryParameter("GroupString",a)}Boolean(l)&&z.setQueryParameter("SortField",l);Boolean(n)&&z.setQueryParameter("SortDir",n);s&&z.setQueryParameter("IgnoreQString","TRUE");var G=z.getString();return G;function D(e,c){if(Boolean(c))for(var d=c.split("&"),b=0,f=d.length;b<f;b++){var a=d[b].split("=");Boolean(a[0])&&e.setQueryParameter(a[0],a[1])}}}}function SelectedItem(){}function CLVP_InitializePrototype(){CLVP.prototype={outstandingServerConnection:undefined,cctx:undefined,ctx:undefined,dsrc:null,fnEcbCallbacks:{},fRestore:false,inplUrl_deprecated:null,cachedUrlBuilder:null,fRest:false,isEcbInfo:false,hasEcbInfo:false,isInserting:false,pagingTab:null,queueEcbInfo:[],rgehs:undefined,rgpag:null,rgpaging:null,rootFolder:null,rootFolderGuid:null,strGroupCache:null,strGroupName:null,tBody:null,currentTBody:null,tab:null,trEmpty:null,wpid:null,wpq:null,strHash:"",xmlHttpCtr:window.XMLHttpRequest,CancelAnyOutstandingRequest:CLVPCancelAnyOutstandingRequest,CacheEcbInfo:CLVPCacheEcbInfo,CacheGroupName:CLVPCacheGroupName,CheckinItem:CLVPCheckinItem,CheckoutItem:CLVPCheckoutItem,DeleteGroupNameCache:CLVPDeleteGroupNameCache,DeleteItemCore:CLVPDeleteItemCore,DiscardCheckoutItem:CLVPDiscardCheckoutItem,EnqueueEcbInfoRequest:CLVPEnqueueEcbInfoRequest,EnsureChangeContext:CLVPEnsureChangeContext,EnsureEcbInfo:CLVPEnsureEcbInfo,FilterString:CLVPFilterString,FindWebPartDiv:CLVPFindWebPartDiv,GetEcbInfo:CLVPGetEcbInfo,GetQueryString:CLVPGetQueryString,Init:CLVPInit,InplViewUrl:CLVPInplViewUrl,ModerateItem:CLVPModerateItem,RefreshInplViewUrl:CLVPRefreshInplViewUrl,InplViewUrlTrim:CLVPInplViewUrlTrim,InplViewUrlHash:CLVPInplViewUrlHash,InvalidateEcbInfo:CLVPInvalidateEcbInfo,IsInGroupCache:CLVPIsInGroupCache,ManageCopies:CLVPManageCopies,NoOutstandingECBRequests:CLVPNoOutstandingECBRequests,PagingString:CLVPPagingString,RefreshCurrent:CLVPRefreshCurrent,RefreshEcbInfo:CLVPRefreshEcbInfo,RefreshPaging:CLVPRefreshPaging,RefreshPagingEx:CLVPRefreshPagingEx,OnReadyStateChangeCallback:CLVPOnReadyStateChangeCallback,IsServerConnectionRequestActive:CLVPIsServerConnectionRequestActive,RehookPaging:CLVPRehookPaging,ResetSelection:CLVPResetSelection,ShowErrorDialog:CLVPShowErrorDialog,ShowPopup:CLVPShowPopup,SyncPagingTables:CLVPSyncPagingTables,WebPartId:CLVPWebPartId,RestoreNavigation:CLVPRestoreNavigation,GetQueryStringFromHash:CLVPGetQueryStringFromHash,FindTab:CLVPFindTab}}function CLVP(a){this.ctx=a;a.clvp=this}function CLVPInit(){var b=this.FindTab();if(b==null)return;this.pagingTab=document.getElementById("bottomPagingCell"+this.wpq.substr(7));if(this.tab!=null&&this.tab.className=="ms-emptyView"){var c=DOM_afterglass.GetAncestor(this.tab,"TR");this.trEmpty=c.nextSibling}if(this.ctx.rootFolder!=null)this.rootFolder=URI.decodeURIComponent(this.ctx.rootFolder);if(!Boolean(this.rootFolder))this.rootFolder=Nav.getUrlKeyValue("RootFolder");if(this.rootFolder.length==0)this.rootFolder=null;var a=this.GetQueryStringFromHash();if(!TypeUtil.IsNullOrUndefined(a))this.ctx.queryString=a}function CLVPFindTab(){var f=this.ctx.listBaseType==1,d=this.ctx.listName+"-"+this.ctx.view,b=DOM.GetElementsByName(d);if(b.length==0&&f){d="onetidDoclibViewTbl0";b=DOM.GetElementsByName(d)}var a=null;if(b.length==0&&!f)b=DOM.GetElementsByName("onetidDoclibViewTbl0");if(b.length==0)b=DOM.GetElementsByName("onetidDoclibViewTbl"+this.ctx.ctxId);for(var e=0;e<b.length;e++){var g=b[e];a=g;var c=a.getAttribute("view");if(!Boolean(c))while(a!=null&&(a.tagName!="DIV"||(c=a.getAttribute("WebPartID"))==null)&&a.parentNode!=null)a=a.parentNode;if(a!=null)if(c!=null&&this.ctx.view.indexOf(c.toUpperCase())==1){this.tab=g;this.wpq="WebPart"+this.ctx.wpq;break}}if(a==null||this.tab==null)return null;this.tab.clvp=this;return a}function CLVPFindWebPartDiv(b){var a=b;while(a!=null&&a.tagName!="DIV")a=a.parentNode;return a}function CLVPRestoreNavigation(){var c="";if(ListModule.Settings.SupportsInplHash)c=GetInplviewHash(this.WebPartId());if(c==null)c="";if(!CompareUrls(this.strHash,c)){var b="?"+InplViewUtil.DecodeHashAsQueryString(c);if(ListModule.Settings.SupportsInPlaceEdit){var e=Nav.getUrlKeyValue("ShowInGrid",true,b);if(e=="True")InitGridFromView(this.ctx.view,true);else this.ctx.inGridMode&&ExitGrid(this.ctx.view,true)}this.strHash=c;this.fRestore=true;var a;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null){a=Nav.getUrlKeyValue("RootFolder",true,b);if(a==null||a==""){a=ListModule.Util.getRootFolder2(this);if(a!=null)b=SetUrlKeyValue("RootFolder",URI.decodeURIComponent(a),true,b)}else{this.ctx.rootFolder=a;if(typeof MountPointInfo!="undefined"){var d=MountPointInfo.createByContext(this.ctx);this.ctx.mountPointUrl=Boolean(d)?d.getMountPointUrl():"";if(Boolean(this.ctx.mountPointUrl)){this.ctx.hasRootFolder=true;this.ctx.RealHttpRoot=this.ctx.HttpRoot}}if(ListModule.Settings.SupportsBreadCrumb)this.ctx.onViewReRenderCompleted=function(b){var a=new BreadcrumbRender(b);a.RenderBreadCrumb()};if(ListModule.Settings.SupportsFacePile)this.ctx.onDataRefreshCompleted=function(a){AsyncRenderSharedWithFacePile(a,a.rootFolder)}}this.RefreshInplViewUrl()}else{a=ListModule.Util.getRootFolder2(this);if(a!=null)b=SetUrlKeyValue("RootFolder",URI.decodeURIComponent(a),true,b)}this.ctx.queryString=b;this.RefreshPagingEx(b,true,null)}}function CLVPGetQueryStringFromHash(){var a=null;if(ListModule.Settings.SupportsUpload)a=GetInplviewHash(this.WebPartId());return TypeUtil.IsNullOrUndefined(a)?"":"?"+InplViewUtil.DecodeHashAsQueryString(a)}function CLVPSyncPagingTables(){if(this.wpq==null)return;var b=this.pagingTab,a=document.getElementById("topPagingCell"+this.wpq.substr(7));if(b==null){if(a!=null)a.style.display="none";return}if(a!=null){a.style.display="";if(DOM.GetInnerText(a)!=DOM.GetInnerText(b))a.innerHTML=b.innerHTML;for(var e=a.getElementsByTagName("A"),d=b.getElementsByTagName("A"),c=0,c=0;c<d.length;c++)e[c].onclick=d[c].onclick}}function CLVPRehookPaging(c){if(typeof this.ctx.noAJAX!="undefined"&&this.ctx.noAJAX)return;var i=this.pagingTab;if(i==null){this.SyncPagingTables();return}for(var h=i.getElementsByTagName("A"),f=0;f<h.length;f++){var e=h[f],a=typeof e.onclick!="undefined"?String(e.onclick):"",g='"';a=a.substr(a.indexOf(g)+1);a=a.substr(0,a.indexOf(g));if(c!=null)a+="&IsGroupRender=TRUE";var k=this,b,d;if(c!=null)b=c.id;else b=null;d=a;typeof b!="undefined"&&typeof d!="undefined"&&j(e,k,d,b)}c==null&&this.SyncPagingTables();function j(d,a,c,b){d.onclick=function(){a.RefreshPaging(c,b);return false}}}function CLVPFilterString(){return this.PagingString(["Filter","Sort"])}function CLVPPagingString(d){if(this.rgpaging==null)return null;var b,g,a=[],e=true;for(b in this.rgpaging){var c=false;if(d==null)c=true;else for(var f in d)if(b.indexOf(f)==0){c=true;break}if(c){if(e)e=false;else a.push("&");a.push(b);a.push("=");a.push(this.rgpaging[b])}}return a.join("")}function CLVPRefreshPaging(c,a,b){if(a!=null)this.tBody=document.getElementById(a);return this.RefreshPagingEx(c,true,null,b)}function CLVPIsServerConnectionRequestActive(){var a=this.outstandingServerConnection;return Boolean(a)&&a.isRequestActive()}function CLVPOnReadyStateChangeCallback(reqStatus,reqResponse,strUrl,authRedirect,isEcbInfo,tBody,groupBody,focusInfo,strRootFolder,hasRootFolder,isMountPoint){var clvp=this;clvp.outstandingServerConnection=void 0;var ix,callback=null;if(typeof clvp.ctx.onDataRefreshCompleted=="function"){callback=clvp.ctx.onDataRefreshCompleted;clvp.ctx.onDataRefreshCompleted=null}if(reqStatus==403)if(ListModule.Util.isDefinedAndNotNullOrEmpty(authRedirect)&&typeof clvp.ctx.onAccessDenied=="function")clvp.ctx.onAccessDenied(authRedirect);callback!=null&&callback(clvp.ctx);if(reqStatus==0||reqStatus==403)return;var uri=Boolean(clvp.ctx.queryString)?new URI(clvp.ctx.queryString,{disableEncodingDecodingForLegacyCode:true}):null;if(uri!==null&&uri.getQuery()!==""){var SaveThisViewButton=document.getElementById("CSRSaveAsNewViewDiv"+clvp.ctx.wpq);if(Boolean(SaveThisViewButton))SaveThisViewButton.style.visibility="visible"}if(reqStatus==601){if(typeof clvp.ctx.onRefreshFailed=="function"){clvp.ctx.onRefreshFailed(clvp.ctx,reqResponse,reqStatus);clvp.ctx.onRefreshFailed=null}return}var strInner=reqResponse;if(isEcbInfo){clvp.hasEcbInfo=false;clvp.CacheEcbInfo(strInner,tBody);clvp.strGroupName=null;if(clvp.queueEcbInfo.length>0)while(clvp.EnsureEcbInfo(null,null,null,clvp.queueEcbInfo.shift())!=null&&clvp.queueEcbInfo.length>0);return}var oldListData=null;if(groupBody==null&&clvp.ctx.IsClientRendering){var rCtx=null,webPartId=clvp.wpid;oldListData=clvp.ctx.ListData;if(Boolean(reqResponse))if(isMountPoint&&clvp.fRest){rCtx=JSON.parse(reqResponse);rCtx.wpq=clvp.ctx.wpq;rCtx.ListTemplateType=700;rCtx.listTemplate="700";rCtx.BaseViewID=51;rCtx.ctxId=clvp.ctx.ctxId;rCtx.view=clvp.ctx.view;rCtx.onViewReRenderCompleted=clvp.ctx.onViewReRenderCompleted;rCtx.RealCtx=typeof clvp.ctx.RealCtx!="undefined"&&Boolean(clvp.ctx.RealCtx)?clvp.ctx.RealCtx:clvp.ctx;clvp=new CLVP(rCtx);clvp.Init();clvp.wpid=webPartId}else{rCtx=clvp.ctx;rCtx.ListData=JSON.parse(reqResponse)}ReRenderListView(rCtx,strUrl,oldListData,(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null)&&(hasRootFolder||isMountPoint||Boolean(strRootFolder))?strRootFolder:null);if(ListModule.Settings.SupportsGrouping){g_ExpGroupTable=[];ExpDataViewGroupOnPageLoad()}return}else if(groupBody!=null&&clvp.ctx.IsClientRendering){rCtx=clvp.ctx;oldListData=rCtx.ListData;rCtx.ListData=JSON.parse(reqResponse);var listSchema=rCtx.ListSchema,group1=listSchema.group1,group2=listSchema.group2,collapse=listSchema.Collapse;listSchema.groupRender=true;listSchema.group1=null;listSchema.group2=null;listSchema.Collapse=null;var oldHeaderTemplate=rCtx.Templates.Header;rCtx.Templates.Header="";SPClientRenderer._ExecuteRenderCallbacks(rCtx,"OnPreRender");strInner=SPClientRenderer.RenderCore(rCtx);if(rCtx.Templates.Footer=="")rCtx.Templates.Footer=RenderFooterTemplate;strInner+=rCtx.RenderFooter(rCtx);rCtx.Templates.Header=oldHeaderTemplate;listSchema.group1=group1;listSchema.group2=group2;listSchema.Collapse=collapse;listSchema.groupRender=null;if(typeof m$!="undefined")rCtx.ListData=MergeListData(oldListData,rCtx.ListData)}var div=document.createElement("DIV"),tid=clvp.tab.id;if(clvp.tab.tagName=="DIV"&&typeof clvp.tab.tabid!="undefined")tid=clvp.tab.tabid;var pid=Boolean(clvp.pagingTab)?clvp.pagingTab.id:null;div.style.visibility="hidden";div.innerHTML=strInner;for(var oldFilterIfrm=document.getElementById("FilterIframe"+clvp.ctx.ctxId),newIfrms=div.getElementsByTagName("IFRAME"),newFilterIfrm=null,idx=0;idx<newIfrms.length;idx++)if(newIfrms[idx].id=="FilterIframe"+clvp.ctx.ctxId){newFilterIfrm=newIfrms[idx];break}if(oldFilterIfrm!=null&&newFilterIfrm!=null){var td=oldFilterIfrm.parentNode;td.removeChild(oldFilterIfrm);td.appendChild(newFilterIfrm)}document.body.appendChild(div);var evalSafeClvp=clvp;eval("ctx"+clvp.ctx.ctxId+".clvp = evalSafeClvp;");var rgscripts=ExpColGroupScripts(strInner),ppid="previewpanetable"+clvp.ctx.ctxId,ppold=document.getElementById(ppid);if(ppold!=null)ppold.id="";clvp.tab.id="";var hid=document.getElementById("hidRootFolder");if(hid!=null){clvp.rootFolder=hid.value;hid.value.indexOf("?")>=0}var hidFolderGuid=document.getElementById("hidRootFolderGuid");if(hidFolderGuid!=null)clvp.rootFolderGuid=hidFolderGuid.value;var tabs;if(groupBody!=null&&clvp.ctx.IsClientRendering)tabs=div.childNodes;else tabs=DOM.GetElementsByName(tid);if(tabs.length==0)if(tid=="onetidDoclibViewTbl0")tabs=DOM.GetElementsByName(clvp.ctx.listName+"-"+clvp.ctx.view);else tabs=DOM.GetElementsByName("onetidDoclibViewTbl0");var tabNew=null,pagNew=document.getElementById("bottomPagingCell"),trNew=null;if(tabs.length==1)tabNew=tabs[0];else{for(ix=0;ix<tabs.length;ix++){tabNew=tabs[ix];var divNew=clvp.FindWebPartDiv(tabNew);if(divNew==div)break}if(ix==tabs.length)tabNew=null}if(tabNew==null){InplViewUtil.SwapNode(clvp.tab,div);div.style.visibility="visible";return}if(tabNew.className=="ms-emptyView"){trNew=DOM_afterglass.GetAncestor(tabNew,"TR");trNew=trNew.nextSibling}var groupRender=false;if(groupBody!=null){groupRender=true;if(groupBody.getAttribute("isLoaded")!=null){groupBody.setAttribute("isLoaded","true");clvp.tab.id=tid;if(typeof clvp.tab.onmouseover=="undefined"||clvp.tab.onmouseover==null)clvp.tab.onmouseover=clvp.ctx.TableMouseoverHandler;if(clvp.ctx.SelectAllCbx!=null&&(typeof clvp.ctx.SelectAllCbx.onfocus=="undefined"||clvp.ctx.SelectAllCbx.onfocus==null))clvp.ctx.SelectAllCbx.onfocus=clvp.ctx.TableCbxFocusHandler;!clvp.ctx.StateInitDone&&ListModule.Util.ctxInitItemState(clvp.ctx);var objChildren=groupBody.childNodes;for(ix=objChildren.length-1;ix>=0;ix--){var objToRemove=objChildren[ix];if(objToRemove.tagName=="TR"&&ListModule.Util.itemIsSelectable(objToRemove))clvp.ctx.TotalListItems--;groupBody.removeChild(objToRemove)}var selectableNodes=0,tBodyArray=tabNew.getElementsByTagName("TBODY");if(tBodyArray.length>=1){objChildren=tBodyArray[0].childNodes;var node=null;for(ix=objChildren.length-1;ix>=0;ix--){var objToInsert=objChildren[ix];if(ix==0&&objToInsert.className.startsWith("ms-viewheadertr"))continue;if(objToInsert.tagName=="TR"&&ListModule.Util.itemIsSelectable(objToInsert)){selectableNodes++;clvp.ctx.TotalListItems++}node=groupBody.insertBefore(objToInsert,node)}if(pagNew!=null){var pagingTable=DOM_afterglass.GetAncestor(pagNew,"TABLE"),curPagTab=groupBody.nextSibling;if(curPagTab==null||curPagTab.tagName!="TBODY"||curPagTab.id!=groupBody.id+"page"||curPagTab.firstChild==null||curPagTab.firstChild.tagName!="TR"){curPagTab=document.createElement("TBODY");curPagTab.id=groupBody.id+"page";curPagTab=groupBody.parentNode.insertBefore(curPagTab,groupBody.nextSibling);var tr=document.createElement("TR");tr=curPagTab.appendChild(tr)}var trNode=curPagTab.firstChild;trNode.firstChild!=null&&trNode.removeChild(trNode.firstChild);pagNew.colSpan=100;pagNew.id=pagNew.id+clvp.wpq.substr(7)+groupBody.id;pagNew=trNode.appendChild(pagNew)}groupBody.setAttribute("selectableRows",String(selectableNodes));ListModule.Util.updateCtxLastSelectableRow(clvp.ctx,clvp.tab)}clvp.InvalidateEcbInfo();clvp.ResetSelection()}}document.body.removeChild(div);if(pagNew!=null){var tab=clvp.pagingTab;clvp.pagingTab=pagNew;clvp.RehookPaging(groupBody);clvp.pagingTab=tab}if(typeof ProcessImn!="undefined"&&typeof imnCount!="undefined"&&typeof bIMNOnloadAttached!="undefined"){imnCount=0;bIMNOnloadAttached=false;ProcessImn()}groupRender&&ListModule.Settings.SupportsGrouping&&ExpandGroup();(!ListModule.Settings.SupportsGrouping||!g_ExpGroupInProgress)&&clvp.queueEcbInfo.length>0&&clvp.EnsureEcbInfo(null,null,null,clvp.queueEcbInfo.shift());if(clvp!=null&&focusInfo!=null)if(focusInfo.focusInCLVPTab!=null&&focusInfo.focusInCLVPTab==true){var focusTabl=clvp.tab,focusBack=null;if(focusTabl!=null&&focusInfo.tagName!=null&&focusInfo.id!=null){var focusArray=focusTabl.getElementsByTagName(focusInfo.tagName);for(ix=0;ix<focusArray.length;ix++)if(focusArray[ix].id==focusInfo.id){focusBack=focusArray[ix];break}}if(focusBack!=null&&focusBack.tagName!="A"){var anchorList=focusBack.getElementsByTagName("A"),anchorListLen=anchorList.length;if(anchorListLen>0)focusBack=anchorList[anchorListLen-1]}if(focusBack!=null)if(typeof focusBack.setActive!="undefined"&&focusBack.setActive!=null)focusBack.setActive();else focusBack.focus!=null&&focusBack.focus();focusAcc=null}groupBody!=null&&clvp.ctx.IsClientRendering&&SPClientRenderer._ExecuteRenderCallbacks(rCtx,"OnPostRender")}function CLVPRefreshPagingEx(f,x,t,A,q){var a=this,y=Nav.getUrlKeyValue("PageFirstRow",false,f)=="1";if(y)f=ListModule.Util.removeOnlyPagingArgs(f);var u=new URI(Boolean(q)?q:f,{disableEncodingDecodingForLegacyCode:true}),r=document.getElementById("GroupByWebPartID"+a.ctx.ctxId),k=null;if(r!=null)k=r.getAttribute("webPartID");var l=a.ctx.HasRelatedCascadeLists==1&&a.ctx.CascadeDeleteWarningMessage==null,g=null;if(a.strGroupName!=null)g=ListModule.Util.groupStringFromGroupName(a.strGroupName);var e=Nav.getUrlKeyValue("RootFolder",true,f);a.ctx.startTime=+new Date;function v(){var h=new SharePointListRestUrlBuilder,d=buildQueryParams(a.rgpaging,t,l,k,g),c=a.InplViewUrl(true),f=buildServerDataEndpoint(c,u,e,d,a.ctx.inGridMode),b={buildUrl:function(){var a=f;if(b._ignoreQString)a=SetUrlKeyValue("IgnoreQString","TRUE",false,a);if(b._rootFolder==null)a=URI.removeKeyValue("RootFolder",a);return a},setIgnoreQString:function(a){b._ignoreQString=a},_ignoreQString:false,setRootFolder:function(a){b._rootFolder=a},_rootFolder:""};return b}function w(){var c=Nav.getUrlKeyValue("SortField",true,window.location.href),d=Nav.getUrlKeyValue("SortDir",true,window.location.href);a.fRest=ListModule.Settings.SupportsRest&&!a.isEcbInfo;var b=__CreateSharePointListRestUrlBuilder(a);!Boolean(a.rgpaging.RootFolder)&&b.setRootFolder(e);b.setInGridMode(a.ctx.inGridMode);b.setCmd(t);b.setShouldCascadeDeleteWarningMessage(l);b.setWebPartID(k);b.setGroupString(g);b.setSortField(c);b.setSortDir(d);b.setPagingParams(a.rgpaging);return b}var C=u.getQuery();if(x||typeof a.rgpaging=="undefined"||a.rgpaging==null)a.rgpaging=getPagingQueryParams(C);var b;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(216))b=w();else b=v();if(A)return b.buildUrl();var m=new ServerConnection;if(ListModule.Settings.SupportsPopup)typeof ctxFilter!="undefined"&&ctxFilter==null&&MenuHtc_hide();var c="",n=false,h=false;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null){n=Boolean(a.ctx.hasRootFolder);h=Boolean(a.ctx.mountPointUrl)}if(a.fRest){c="{'parameters': {'__metadata': { 'type': 'SP.RenderListDataParameters' }, 'ViewXml': ''";if(h)c+=", 'RenderOptions': '7'";c+="}}"}else{if(typeof a.ctx.overrideSelectCommand!="undefined"){c="&OverrideSelectCommand="+a.ctx.overrideSelectCommand;b.setIgnoreQString(true)}if(e.length>0){c=c+"&InplRootFolder="+e;b.setRootFolder(null)}}a.ctx.hasRootFolder=false;a.ctx.mountPointUrl=null;var j=false;if(a.isEcbInfo){j=true;a.isEcbInfo=false;a.hasEcbInfo=true}var z=a.tBody,D=a.currentTBody;a.tBody=null;a.CancelAnyOutstandingRequest();var p=null;if(focusAcc!=null&&focusAcc.focusInCLVPTab!=null)p=focusAcc;if(a.ctx.enteringGridMode&&!a.fRestore){ReRenderListView(a.ctx,b.buildUrl(),null,null);return void 0}var d={},B=b.buildUrl().indexOf("?"),i=Boolean(a.ctx)&&typeof a.ctx.ListTemplateType!="undefined"&&a.ctx.ListTemplateType==700;d.action=b.buildUrl().substr(B+1);WriteStart(i?"OneDriveAjaxStarted":"ListAjaxStarted",d);var s=new Date,o=function(){var f=function(b){var f=b.GetValue(b.DataValueKeys.Status),d=b.GetValue(b.DataValueKeys.ResponseText),c=b.GetValue(b.DataValueKeys.AuthenticationRedirect),g=b.GetValue(b.DataValueKeys.SourceURL);a.OnReadyStateChangeCallback(f,d,g,c,j,D,z,p,e,n,h)},k=function(a){var b=a.GetValue(a.DataValueKeys.CorrelationId);d.correlationId=b;if(typeof GetRUMWSA==="function"){var g=GetRUMWSA();Boolean(g)&&g.SetCorrelationId(b)}var h=Number(+new Date-s.getTime());WriteSuccess(i?"OneDriveAjaxSuccess":"ListAjaxSuccess",d,0,h);var c=-1,e=-1;try{c=Number(a.GetValue(a.DataValueKeys.SPRequestDuration));e=Number(a.GetValue(a.DataValueKeys.SPIisLatency))}catch(j){}EnsureScriptFunc("sp.core.js","SP.SlapiInternal",function(){var a=TypeUtil.IsNullOrUndefined(PerformanceLogger)?null:PerformanceLogger.GetLogger();if(!TypeUtil.IsNullOrUndefined(a)){a.ResetPerformanceLogger();a.WriteServerCorrelationId(b);a.WritePageTransitionType(0);a.WriteServerSideLatency(c,e);a.CollectW3CPerfTimings()}});f(a)},g=function(a){var b=a.GetValue(a.DataValueKeys.CorrelationId);d.correlationId=b;var c=Number(+new Date-s.getTime());WriteFailure(i?"OneDriveAjaxFailure":"ListAjaxFailure",d,0,c);f(a)};m.getServerData(b.buildUrl,k,g,a.xmlHttpCtr,c,a.fRest);a.outstandingServerConnection=m};if(a.ctx.inGridMode&&!a.ctx.enteringGridMode&&!j&&ListModule.Settings.SupportsInPlaceEdit)ExitGrid(a.ctx.view,true,function(){a.ctx.inGridMode=true;a.ctx.leavingGridMode=false;o()},true);else o();return void 0}function CLVPResetSelection(){var a=this.ctx,f=true;this.CUIItemInfo=null;if(ListModule.Util.countSelectedItems(a)>0){var g=a.dictSel;a.dictSel=[];a.CurrentSelectedItems=0;var h=window.location.href;if(h.indexOf("Filter")==-1&&h.indexOf("Sort")==-1){var d=this.tab;if(d!=null){var c=d.rows,k=function(b){var a=b.getAttribute("iid");return a!=null&&g[a]!=null},b=ListModule.Util.getLastSelectableRowIdx(d,k);if(c!=null&&b>0){for(var e=0;e<b;e++){var j=c[e],i=j.getAttribute("iid");i!=null&&g[i]!=null&&ListModule.Util.toggleItemRowSelection2(a,j,true,false,false)}f=false;ListModule.Util.toggleItemRowSelection2(a,c[b],true,true,false)}}}}ListModule.Util.updateSelectAllCbx(a,true);if(ListModule.Settings.SupportsRibbon)f&&RefreshCommandUI()}function CLVPWebPartId(){if(this.wpid==null){if(this.tab!=null){var a=this.tab;while(a!=null&&a.tagName!="DIV")a=a.parentNode;if(a!=null){if(a.getAttribute("WebPartID2")!=null){this.wpid=a.getAttribute("WebPartID2");return this.wpid}if(a.getAttribute("WebPartID")!=null){this.wpid=a.getAttribute("WebPartID");return this.wpid}}}this.wpid=this.ctx.view.toLowerCase().substring(1,this.ctx.view.length-1)}return this.wpid}function CLVPCancelAnyOutstandingRequest(){var a=this;if(a.IsServerConnectionRequestActive()){if(a.isEcbInfo){a.isEcbInfo=false;a.strGroupName=null}a.outstandingServerConnection.abort();a.outstandingServerConnection=void 0}return false}function CLVPRefreshCurrent(){var a=Nav.ajaxNavigate.get_href();a=FixUrlFromClvp2(this,a,false);return this.RefreshPagingEx(a,false,null,true)}function CLVPGetQueryString(){return this.tab!=null&&this.tab.getAttribute("FilterLink")!=null?this.tab.getAttribute("FilterLink"):Nav.ajaxNavigate.get_href()}function CLVPRefreshEcbInfo(c,b){var a=this.GetQueryString();a=FixUrlFromClvp2(this,a,false);this.isEcbInfo=true;this.strGroupName=c;var d=this;this.RefreshPagingEx(a,Boolean(b),"EcbView",false,b)}function CLVPCacheEcbInfo(c,m){if(this.ctx.HasRelatedCascadeLists==1&&this.ctx.CascadeDeleteWarningMessage==null){var j="<CascadeDeleteWarningMessage>",k="</CascadeDeleteWarningMessage>";if(c.startsWith(j)){var h=c.indexOf(k);if(h!==-1){this.ctx.CascadeDeleteWarningMessage=c.substring(j.length,h);c=c.substring(h+k.length)}}}var g=document.createElement("DIV");g.innerHTML=c;g.style.display="none";var p=g.getElementsByTagName("TABLE"),a,e,b=null;if(this.strGroupName!=null){var r="ecbtab_ctx"+this.ctx.ctxId;b=document.getElementById(r)}for(e=0;e<p.length;e++){a=p[e];if(this.tab!=null&&a.id==this.tab.id){if(b==null){a.id="ecbtab_ctx"+this.ctx.ctxId;if(IsInfiniteScrollSupported(this.ctx))if(m!=null){var l=m.getAttribute("url");if(Boolean(l))a.id=a.id+l}}else a.id="ecbtab_ctx"+this.ctx.ctxId+"_"+this.strGroupName;var n=a.rows;n.length>0&&!n[0].className.indexOf("ms-viewheadertr")&&a.deleteRow(0);a.style.display="none";this.tab.appendChild(a);var d;if(b==null)d=[];else d=typeof b.dict=="undefined"?undefined:b.dict;for(var q=a.getElementsByTagName("DIV"),i=0;i<q.length;i++){var f=q[i];if(f.id!="")d[f.id]=f}if(b==null)a.dict=d;this.strGroupName!=null&&this.CacheGroupName(this.strGroupName);break}}if(this.queueEcbInfo.length==0){var o;for(o in this.fnEcbCallbacks)this.fnEcbCallbacks[o]();this.fnEcbCallbacks={}}}function CLVPEnsureEcbInfo(d,j,k,b,l){var a="",h=" ",e=null;if(IsInfiniteScrollSupported(this.ctx)){if(l!=null){e=l.parentNode;a=e.getAttribute("url")}if(!Boolean(a))a=h}var f="ecbtab_ctx"+this.ctx.ctxId;if(Boolean(a)&&a!=h)f+=a;var c=document.getElementById(f);if(c==null&&this.tab!=null&&this.tab.parentNode==null)for(var g=0;g<this.tab.childNodes.length;g++){var i=this.tab.childNodes[g];if(i.id==f)c=i}if(c!=null&&b!=null)if(!this.IsInGroupCache(b))c=null;if(c!=null){typeof d=="function"&&this.NoOutstandingECBRequests()&&d(k);return c}if(d!=null){if(!Boolean(j)){WriteDebugLog("FailureCLVPEnsureEcbInfo",false,"Function key is not provided.");throw new Error;}this.fnEcbCallbacks[j]=function(){d(k)}}if(this.isEcbInfo||this.IsServerConnectionRequestActive()){(!this.isEcbInfo&&!this.hasEcbInfo||b!=null&&b!=this.strGroupName)&&this.EnqueueEcbInfoRequest(b);return null}this.currentTBody=e;this.RefreshEcbInfo(b,a);this.currentTBody=null;return null}function CLVPInvalidateEcbInfo(){var b="ecbtab_ctx"+this.ctx.ctxId,a=document.getElementById(b);if(a!=null&&a.parentNode!=null){a.parentNode.removeChild(a);this.DeleteGroupNameCache()}}function CLVPGetEcbInfo(d,f,e){var b=null;if(IsInfiniteScrollSupported(this.ctx)&&typeof GetTrFromIID=="function"){var c=this.ctx.ctxId+","+d+",";b=GetTrFromIID(c+"0");if(b==null)b=GetTrFromIID(c+"1")}var a=this.EnsureEcbInfo(f,e,null,null,b);if(a!=null)if(typeof a.dict!="undefined"&&a.dict!=null)return a.dict[d];return null}function CLVPEnsureChangeContext(){if(this.cctx==null)this.cctx=new SP.ClientContext(null)}function CLVPDeleteItemCore(b,a){ListModule.Settings.SupportsItemDelete&&_CLVPDeleteItemCore(this,b,a)}function CLVPCheckoutItem(c,a,b){ListModule.Settings.SupportsCheckout&&_CLVPCheckoutItem(this,c,a,b)}function CLVPDiscardCheckoutItem(c,a,b){ListModule.Settings.SupportsCheckout&&_CLVPDiscardCheckoutItem(this,c,a,b)}function CLVPCheckinItem(c,a,d,b){ListModule.Settings.SupportsCheckout&&_CLVPCheckinItem(this,c,a,d,b)}function CLVPManageCopies(g,e){if(e!="0")return;var c=this.GetEcbInfo(g);if(c!=null&&c.getAttribute("Url")!=null){var a=c.getAttribute("Url");if(!(window.OffSwitch==null||OffSwitch.IsActive("E2EE0DA1-8D03-474E-87BC-650853A49E2B")))a=unescapeProperly(a);a=this.ctx.HttpRoot+"/_layouts/15/managecopies.aspx?ItemUrl="+URI_Encoding.encodeURIComponent(a)+"&Source="+Nav.getSource();var b=window["ctx"+this.ctx.ctxId];if(b!=null&&b.clvp!=null){var d=b.clvp,h=FixUrlFromClvp(d,a),f=typeof FV4UI=="function"?FV4UI():true;if(f){d.ShowPopup(h);return}}Nav.navigate(a)}}function CLVPShowErrorDialog(b,a){ListModule.Settings.SupportsErrorDlg&&_CLVPShowErrorDialog(this,b,a)}function CLVPRefreshInplViewUrl(){this.cachedUrlBuilder=null;this.inplUrl_deprecated=null;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(216))this.cachedUrlBuilder=this.InplViewUrl();else this.inplUrl_deprecated=this.InplViewUrl();return false}function CLVPInplViewUrl(d){var a=this;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(216)&&!Boolean(d))return c();else return b();function c(){if(a.cachedUrlBuilder!=null){a.cachedUrlBuilder.setIsClientRendering(a.ctx.IsClientRendering);a.cachedUrlBuilder.setIsEcbInfo(a.isEcbInfo)}else{a.fRest=ListModule.Settings.SupportsRest&&!a.isEcbInfo;a.cachedUrlBuilder=__CreateSharePointListRestUrlBuilder(a);if(typeof a.ctx.searchTerm!="undefined"&&a.ctx.searchTerm!=null&&typeof a.ctx.ListTemplateType!="undefined")if(typeof SP!="undefined"&&typeof SP.QoS!="undefined"&&typeof SP.QoS.WriteUserEngagement!="undefined")if(a.ctx.ListTemplateType==700)SP.QoS.WriteUserEngagement("OneDriveInPlaceSearchUsed");else SP.QoS.WriteUserEngagement("SitesInPlaceSearchUsed")}return a.cachedUrlBuilder}function b(){var c=typeof ctx!="undefined"?ctx:a.ctx,e=ListModule.Settings.SupportsRest&&!a.isEcbInfo,d=typeof a.ctx.IsClientRendering!="undefined"&&a.ctx.IsClientRendering,f=a.isEcbInfo;if(a.inplUrl_deprecated==null){var b=new SharePointListRestUrlBuilder;b.setHttpRoot(Boolean(c.RealHttpRoot)?c.RealHttpRoot:c.HttpRoot);b.setUseRest(e);b.setIsClientRendering(d);b.setListName(a.ctx.listName);b.setView(a.ctx.view);b.setCtxId(String(a.ctx.ctxId));b.setIsXslView(typeof a.ctx.isXslView!="undefined"&&a.ctx.isXslView);b.setOverrideSelectCommand(typeof a.ctx.overrideSelectCommand!="undefined");b.setOverrideFilterQstring(a.ctx.overrideFilterQstring);b.setOverrideScope(a.ctx.overrideScope);b.setSearchTerm(a.ctx.searchTerm);b.setIsFullListSearch(typeof a.ctx.fullListSearch!="undefined"&&a.ctx.fullListSearch!=null&&a.ctx.fullListSearch);b.setIsRealHttpRoot(Boolean(a.ctx.RealHttpRoot));a.inplUrl_deprecated=b.buildUrl();a.fRest=e;if(typeof a.ctx.searchTerm!="undefined"&&a.ctx.searchTerm!=null&&typeof a.ctx.ListTemplateType!="undefined"&&a.ctx.ListTemplateType==700)typeof SP!="undefined"&&typeof SP.QoS!="undefined"&&typeof SP.QoS.WriteUserEngagement!="undefined"&&SP.QoS.WriteUserEngagement("OneDriveInPlaceSearchUsed")}return a.inplUrl_deprecated+(d&&f?"&IsRibbon=TRUE":"")}}function __CreateSharePointListRestUrlBuilder(a){var c=typeof ctx!="undefined"?ctx:a.ctx,d=typeof a.ctx.IsClientRendering!="undefined"&&a.ctx.IsClientRendering,e=a.isEcbInfo,b=new SharePointListRestUrlBuilder;b.setHttpRoot(Boolean(c.RealHttpRoot)?c.RealHttpRoot:c.HttpRoot);b.setUseRest(a.fRest);b.setIsClientRendering(d);b.setIsEcbInfo(e);b.setListName(a.ctx.listName);b.setView(a.ctx.view);b.setCtxId(String(a.ctx.ctxId));b.setIsXslView(typeof a.ctx.isXslView!="undefined"&&a.ctx.isXslView);b.setOverrideSelectCommand(typeof a.ctx.overrideSelectCommand!="undefined");b.setOverrideFilterQstring(a.ctx.overrideFilterQstring);b.setOverrideScope(a.ctx.overrideScope);b.setSearchTerm(a.ctx.searchTerm);b.setIsFullListSearch(typeof a.ctx.fullListSearch!="undefined"&&a.ctx.fullListSearch!=null&&a.ctx.fullListSearch);b.setIsRealHttpRoot(Boolean(a.ctx.RealHttpRoot));b.setMountPointUrl(a.ctx.mountPointUrl);return b}function CLVPInplViewUrlTrim(c){var a="";if(Boolean(c)){var b;if(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(216))b=this.InplViewUrl().buildUrl();else b=this.InplViewUrl();if(typeof this.ctx.overrideFilterQstring!="undefined")a=c.substr(b.length-this.ctx.overrideFilterQstring.length);else{a=c.substr(b.length);if(a[0]=="&")a=a.substring(1)}}return a}function CLVPInplViewUrlHash(c,b){var a=this.InplViewUrlTrim(c);if(Boolean(b)&&a.indexOf("RootFolder")==-1){if(Boolean(a)&&!a.endsWith("&"))a+="&";a+="RootFolder="+b}a=InplViewUtil.EncodeQueryStringAsHash(a);return a}function CLVPShowPopup(a){ListModule.Settings.SupportsPopup&&_CLVPShowPopup(a);return false}function CLVPIsInGroupCache(a){return this.strGroupCache==null?false:this.strGroupCache.indexOf(a+"$")!=-1}function CLVPCacheGroupName(a){if(this.strGroupCache==null)this.strGroupCache=a+"$";else this.strGroupCache=this.strGroupCache+a+"$"}function CLVPDeleteGroupNameCache(){if(this.strGroupCache==null)return;var b=0,a;a=this.strGroupCache.indexOf("$",b);while(a!=-1){var d=this.strGroupCache.substring(b,a),e="ecbtab_ctx"+this.ctx.ctxId+"_"+d,c=document.getElementById(e);Boolean(c)&&this.tab.removeChild(c);b=a+1;a=this.strGroupCache.indexOf("$",b)}this.strGroupCache=null}function CLVPEnqueueEcbInfoRequest(b){for(var a=0;a<this.queueEcbInfo.length;a++)if(this.queueEcbInfo[a]==b)return;this.queueEcbInfo.push(b)}function CLVPNoOutstandingECBRequests(){return this.isEcbInfo||this.hasEcbInfo?false:this.queueEcbInfo.length>0?false:true}function InitCLVPs(){if(typeof g_ViewIdToViewCounterMap!="undefined"){var b;for(b in g_ViewIdToViewCounterMap){var a=window["ctx"+g_ViewIdToViewCounterMap[b]];if(Boolean(a)){var c=new CLVP(a);c.Init()}}}}function CLVPModerateItem(b,a){ListModule.Settings.SupportsModeration&&_CLVPModerateItem(this,b,a)}function getPagingQueryParams(e){for(var d=e.split("&"),c=[],b=0,b=0;b<d.length;b++){var a=d[b].split("=");if(a[0]=="List"||a[0]=="View"||a[0]=="ID")continue;if(a.length>1)c[a[0]]=a[1]}return c}function buildQueryParams(e,f,g,d,c){var a=[];f!=null&&a.push("&Cmd="+f);g&&a.push("&CascDelWarnMessage=1");var b;for(b in e){if(b=="List"||b=="View"||b=="ID")continue;a.push("&");a.push(b);a.push("=");a.push(e[b])}Boolean(d)&&a.push("&WebPartID="+d);c!=null&&a.push("&IsGroupRender=TRUE&DrillDown=1&GroupString="+c);return a.join("")}function buildServerDataEndpoint(h,l,b,i,f){var e=new URI(h,{disableEncodingDecodingForLegacyCode:true}),k=e.getStringWithoutQueryAndFragment(),j=e.getQuery(),a=k+"?"+ListModule.Util.reconcileQstringFilters(j,i);if(Nav.getUrlKeyValue("SortField",true,a).length==0){var d=Nav.getUrlKeyValue("SortField",true,window.location.href);if(d.length>0)a=SetUrlKeyValue("SortField",d,false,a);var g=Nav.getUrlKeyValue("SortDir",true,window.location.href);if(g.length>0)a=SetUrlKeyValue("SortDir",g,false,a)}if(b.length>0&&Nav.getUrlKeyValue("RootFolder",true,a).length==0)a=SetUrlKeyValue("RootFolder",b,false,a);var c=Nav.getUrlKeyValue("ShowInGrid",true,a);if(c=="True"&&!f)a=SetUrlKeyValue("ShowInGrid","False",true,a);else if(c!="True"&&f)a=SetUrlKeyValue("ShowInGrid","True",true,a);return a}function ReRenderListView(a,k,o,f){var b=a.clvp,d=EnableListAnimation(a),h=false,g=false;if(d)h=a.ListData.Row.length==0||Boolean(a.ListData.NextHref);var e=a.bNoDelete?o:null;if(d)g=a.ListData.Row.length==0||Boolean(a.ListData.NextHref);var n=d&&g&&!h,c=null;if(!(b!=null&&b.fRestore||a.enteringGridMode||a.leavingGridMode))c=document.getElementById("scriptBody"+a.wpq);ReRenderHeroButton(a);RenderListView(a,a.wpq,c,d,n);FixSortOrderIcon(a,a.ListData,a.ListSchema);FixAggregate(a,a.ListData,a.ListSchema);if(b==null){b=new CLVP(a);a.clvp=b}if(b.tab==null)b.Init();else c==null&&b.FindTab();if(b.fRestore||a.enteringGridMode||a.leavingGridMode){b.fRestore=false;b.tab!=null&&CSSUtil.RemoveClass(b.tab,"s4-hide-tr")}if(!Boolean(b.ctx.loadingAsyncData)&&!b.fRestore&&!Boolean(b.ctx.bNoDelete)||b.ctx.enteringGridMode||b.ctx.leavingGridMode||f!=null&&!Boolean(b.ctx.bNoDelete)){var l={},j=b.InplViewUrlHash(k,f);l["InplviewHash"+b.WebPartId()]=j;ListModule.Settings.SupportsInplHash&&AjaxNavUpdate(l);b.strHash=j}b.ctx.bNoDelete=false;if(Boolean(b.ctx.loadingAsyncData))b.ctx.loadingAsyncData=false;if(e==null){ListModule.Util.ctxInitItemState(a);ListModule.Util.clearSelectedItemsDict(a)}if(b.tab!=null&&(typeof b.tab.onmouseover=="undefined"||b.tab.onmouseover==null))b.tab.onmouseover=b.ctx.TableMouseoverHandler;if(a.SelectAllCbx!=null&&(typeof a.SelectAllCbx.onfocus=="undefined"||a.SelectAllCbx.onfocus==null))a.SelectAllCbx.onfocus=a.TableCbxFocusHandler;if(e==null){b.InvalidateEcbInfo();b.ResetSelection();b.SyncPagingTables()}if(ListModule.Settings.SupportsAnimation&&d&&c!=null)AnimateListDelta(a,c.parentNode);else if(typeof ProcessImn!="undefined"&&typeof imnCount!="undefined"&&typeof bIMNOnloadAttached!="undefined"){imnCount=0;bIMNOnloadAttached=false;ProcessImn()}var m=a.qcb;Boolean(m)&&m.Poll();if(typeof b.ctx.onViewReRenderCompleted=="function"){var i=b.ctx.onViewReRenderCompleted;b.ctx.onViewReRenderCompleted=null;i!=null&&i(b.ctx)}a.operationType=SPListOperationType.Default;if(a.leavingGridMode)a.leavingGridMode=false;if(e!=null){a.ListData=MergeListData(e,a.ListData);typeof scrollManager.ScrollHandler=="function"&&scrollManager.ScrollHandler();if(c!=null){c=c.parentNode.lastChild;c!=null&&c.setAttribute("url",k)}}}function FixAggregate(b,f,a){if(f==null||a==null)return;var d=a.Aggregate;if(d!=null&&!a.groupRender&&!b.inGridMode){var c=document.getElementById("aggr"+b.wpq),h="<table>"+RenderAggregate(b,null,f.Row[0],a,null,true,d)+"</table>",i=document.getElementById("scriptBody"+b.wpq),e=document.createElement("div");e.innerHTML=h;var g=e.firstChild.firstChild;c.replaceChild(g.firstChild,c.firstChild)}}function FixSortOrderIcon(c,b,f){if(c==null||b==null||f==null)return;if(c.IsClientRendering){var a;if(b.SortField!=null){a=document.getElementById("diidSortArrowSpan"+c.ctxId+b.SortField);if(a!=null){var d=a.getElementsByTagName("img")[0];if(d!=null){if(b.SortDir=="ascending"){a.className="ms-sortarrowup-iconouter";d.className="ms-sortarrowup-icon";d.alt=window.ListView.Strings.L_viewedit_onetidSortAsc}else{a.className="ms-sortarrowdown-iconouter";d.className="ms-sortarrowdown-icon";d.alt=window.ListView.Strings.L_viewedit_onetidSortDesc}a.style.display=""}}}var h,g;for(var i in f.Field){var e=f.Field[i];if(e.GroupField!=null)continue;if(e.Name!=b.SortField){a=document.getElementById("diidSortArrowSpan"+c.ctxId+e.Name);if(a!=null)a.style.display="none"}g=document.getElementById("diidFilterSpan"+c.ctxId+e.Name);if(g!=null){h=b.FilterFields!=null&&b.FilterFields.indexOf(";"+e.Name+";")>=0;g.style.display=h?"":"none"}}}else FixSortOrderIcon_NonCSR(c,b,f)}function FixSortOrderIcon_NonCSR(l,d,j){var h="/_layouts/15/images/sort.gif",g="/_layouts/15/images/rsort.gif";if(d==null||j==null)return;if(d.SortField!=null){var b=document.getElementById("diidSort"+l.ctxId+d.SortField);if(b!=null){var c=b.lastChild;if(c!=null){var a=c.previousSibling;a!=null&&a.tagName=="IMG"&&(a.src.substr(a.src.length-h.length)==h||a.src.substr(a.src.length-g.length)==g)&&a.parentNode.removeChild(a);var f=document.createElement("IMG");f.border=0;if(d.SortDir=="ascending"){f.alt=window.ListView.Strings.L_viewedit_onetidSortAsc;f.src="/_layouts/15/images/sort.gif?rev=47"}else{f.alt=window.ListView.Strings.L_viewedit_onetidSortDesc;f.src="/_layouts/15/images/rsort.gif?rev=47"}if(c.tagName!="IMG"){var k=document.createElement("IMG");k.border=0;k.src="/_layouts/15/images/blank.gif";c=b.appendChild(k)}b.insertBefore(f,c)}}}for(var n in j.Field){var i=j.Field[n];if(i.GroupField!=null)continue;b=document.getElementById("diidSort"+l.ctxId+i.Name);if(i.Name!=d.SortField)if(b!=null){c=b.lastChild;if(c!=null){a=c.previousSibling;a!=null&&a.tagName=="IMG"&&(a.src.substr(a.src.length-h.length)==h||a.src.substr(a.src.length-g.length)==g)&&a.parentNode.removeChild(a)}}if(b!=null){var e=b.nextSibling;if(e==null){e=document.createElement("IMG");e.border=0;b.parentNode.appendChild(e)}var m=d.FilterFields!=null&&d.FilterFields.indexOf(";"+i.Name+";")>=0;if(m)e.src="/_layouts/15/images/filter.gif";else e.src="/_layouts/15/images/blank.gif"}}}function ExpColGroupScripts(c){var d=[],e=/<script type="text\/javascript">ExpCollGroup\('[^']*',\s*'[^']*'\);<\/script>/g,b=e.exec(c);while(b!=null){var a=b[0],g=a.indexOf("ExpCollGroup"),f=a.indexOf(";");d.push(a.substring(g,f+1));b=e.exec(c)}return d}function FixDroppedOrPastedClvps(){if(typeof g_ViewIdToViewCounterMap!="undefined"){var c;for(c in g_ViewIdToViewCounterMap){var b=window["ctx"+g_ViewIdToViewCounterMap[c]];if(Boolean(b)){var a=b.clvp;if(Boolean(a)&&(!Boolean(a.tab)||!Boolean(a.tab.parentNode)||1!=a.tab.parentNode.nodeType)){a=new CLVP(b);a.Init()}}}}}function FocusInfo_InitializePrototype(){FocusInfo.prototype={elem:null,id:null,tagName:null,focusInCLVPTab:null,fromRibbon:undefined,setActive:undefined}}function FocusInfo(){}var focusAcc;function GetFocusInfo(b,j){var c=new FocusInfo;c.fromRibbon=typeof b.fromRibbon!="undefined"?b.fromRibbon:undefined;var a=null;if(Boolean(b.target))a=b.target;else if(Boolean(b.srcElement))a=b.srcElement;if(typeof b.fakeEvent!="undefined"&&b.fakeEvent){if(typeof a.master!="undefined"&&a.master!=null&&typeof a.master._oParent!="undefined")a=a.master._oParent;if(a!=null&&a.tagName!="A")a=a.getElementsByTagName("A")[0]}else if(!Flighting.VariantConfiguration.IsExpFeatureClientEnabled(169))if(Boolean(b.fromRibbon)!=true)while(a.tagName!="A"&&a.tagName!="BODY")a=a.parentNode;var e=null;if(a!=null){while(a.id.length==0&&a.tagName!="BODY")a=a.parentNode;e=a.id}var d=null;if(a!=null)d=a.tagName;var h=false,f=null;if(j!=null)f=j.tab;if(f!=null&&d!=null&&e!=null)for(var i=f.getElementsByTagName(d),g=0;g<i.length;g++)if(i[g].id==e){h=true;break}c.elem=a;c.id=e;c.tagName=d;c.focusInCLVPTab=h;focusAcc=c}function CompareUrls(a,b){return typeof a=="undefined"||a==null||typeof b=="undefined"||b==null?false:BrowserDetection.userAgent.firefox&&typeof URI.CompleteDecode=="function"?URI.CompleteDecode(a)==URI.CompleteDecode(b):a==b}function MergeListData(a,b){if(ListModule.Settings.SupportsMQuery)for(var c in b.Row){var e=false;for(var d in a.Row)if(b.Row[c].ID==a.Row[d].ID){e=true;m$.extend(a.Row[d],b.Row[c]);continue}!e&&a.Row.push(b.Row[c])}return a}var SPListOperationType;function EnableListAnimation(a){var b=false;if(ListModule.Settings.SupportsAnimation){b=SPAnimation.Settings.IsAnimationEnabled()&&TypeUtil.IsNullOrUndefined(a.ListSchema.group1)&&TypeUtil.IsNullOrUndefined(a.ListSchema.group2)&&TypeUtil.IsNullOrUndefined(a.ListSchema.Aggregate)&&a.Templates.Body===RenderBodyTemplate&&(a.BaseViewID==1||a.ListTemplateType==101&&a.ListSchema.IsDocLib=="1"&&a.BaseViewID==50||a.ListTemplateType==700&&(a.BaseViewID==51||a.BaseViewID==52)||Boolean(a.RealHttpRoot)&&a.BaseViewID==51&&Flighting.VariantConfiguration.IsExpFeatureClientEnabled(134)||Boolean(a.RealHttpRoot)&&a.BaseViewID==56&&Flighting.VariantConfiguration.IsExpFeatureClientEnabled(160))&&!a.clvp.fRestore&&!a.skipNextAnimation&&!a.bNoDelete&&!a.inGridMode&&!a.leavingGridMode;a.skipNextAnimation=false}return b}function AnimateListDelta(c,f){var g=ListModule.Settings.SupportsAnimation&&g_fAnimateListCSR&&IsVisible(f),d=c.ctxId,h=FetchTableBodies(f),e=h.oldbody,a=h.newbody,b=document.getElementById("scriptPaging"+c.wpq);if(e==null&&a==null)return;if(c.operationType==SPListOperationType.PagingRight||c.operationType==SPListOperationType.PagingLeft)if(g){var i=new SPAnimationUtility.TableAnimator(f);i.AnimatePaging(c.operationType==SPListOperationType.PagingRight,b,function(){FixupTable(null,a,b,d)})}else FixupTable(e,a,b,d);else if(Boolean(a)&&g){var j=new SPAnimationUtility.TableAnimator(f);j.AnimateSort(e,a,function(){FixupTable(null,a,b,d)})}else FixupTable(e,a,b,d);if(ListModule.Settings.SupportsAnimation)g_fAnimateListCSR=true;return}function FetchTableBodies(c){var a=c.firstChild;while(a!=null&&a.nodeName!="TBODY")a=a.nextSibling;var b;if(a==null)b=null;else if(a.style.display=="none"){b=a;a=null}else b=a.nextSibling;return{oldbody:a,newbody:b}}function IsVisible(a){var b=a.offsetWidth==0||a.offsetHeight==0||a.style.visibility=="hidden";return!b}function FixupTable(a,b,d,e){var c=Boolean(a)?a.parentNode:b.parentNode;if(c!=null&&c.nodeName=="TABLE"){Boolean(a)&&a.nodeName=="TBODY"&&c.removeChild(a);if(Boolean(b)&&b.nodeName=="TBODY")b.style.display="";EnsureSelectionHandler(null,c,e)}if(typeof ProcessImn!="undefined"&&typeof imnCount!="undefined"&&typeof bIMNOnloadAttached!="undefined"){imnCount=0;bIMNOnloadAttached=false;ProcessImn()}if(d!=null&&d.style.display=="none")d.style.display=""}function FixUrlFromClvp(a,b){return FixUrlFromClvp2(a,b,true)}function FixUrlFromClvp2(b,a,h){var c=b.rootFolder,e=(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null)&&Boolean(b.ctx.mountPointUrl),f=(Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null)&&Boolean(b.ctx.hasRootFolder),d=null;if((c==null||c.length==0)&&b.rgpaging==null&&!e)return a;if(c!=null&&c.length>0||f&&Boolean(c))if(a.toUpperCase().indexOf("LISTEDIT.ASPX")==-1||f)a=SetUrlKeyValue("RootFolder",c,true,a);if(e){var g=a[a.length-1];if(Boolean(a)&&g!="&"&&g!="?")a+="&";a+=b.ctx.mountPointUrl}if(h){var i=GetSource2(null,b);a=SetUrlKeyValue("Source",i,true,a)}if(Boolean(b.ctx.RealHttpRoot)&&(d=ListModule.Util.tryAppendMountedFolderQueryStrParams(a,true,false))!=null)a=d;return a}function GetSource2(c,b,e){var a=Nav.getUrlKeyValue("Source");if(a=="")if(c!=null&&c!="")a=c;else a=Nav.ajaxNavigate.get_href();if(b==null&&typeof currentCtx!="undefined"&&currentCtx!=null&&typeof currentCtx.clvp!="undefined"&&currentCtx.clvp!=null)b=currentCtx.clvp;if(b!=null&&(b.rootFolder!=null||b.rgpaging!=null))if(a!=""){if(b.rootFolder!=null&&b.rootFolder!="")a=SetUrlKeyValue("RootFolder",b.rootFolder,true,a);if(b.rgpaging!=null&&(!(b.ctx!=null&&b.ctx.IsClientRendering)||e)){var d;for(d in b.rgpaging)a=SetUrlKeyValue(d,b.rgpaging[d],false,a);if(b.rgpaging.PagedPrev==null){a=URI.removeKeyValue("PagedPrev",a);a=URI.removeKeyValue("PageLastRow",a)}if(b.rgpaging.PageFirstRow==null)a=URI.removeKeyValue("PageFirstRow",a)}}return Nav.pageUrlValidation(a)}var inplview;function RefreshPageToEx(f,b,e){var a=CLVPFromEventReal(f);if(a!=null&&a.ctx.IsClientRendering){if(IsInfiniteScrollSupported(a.ctx))a.ctx.bNoDelete=true;a.RefreshPaging(b);if(!IsInfiniteScrollSupported(a.ctx))a.ctx.queryString=b;if((typeof a.ctx.operationType=="undefined"||a.ctx.operationType==SPListOperationType.Default)&&Boolean(a.ctx.ListData)){var c=a.ctx.ListData.FirstRow-1,d=Number(Nav.getUrlKeyValue("PageFirstRow",false,b));if(!isNaN(c)&&!isNaN(d)&&c!=d)c<d?a.ctx.operationType=SPListOperationType.PagingRight:a.ctx.operationType=SPListOperationType.PagingLeft}}else ListModule.Settings.SupportsNonCSR&&SubmitFormPost(b,e)}function STSNavigateToViewReal(b,a){Nav.navigate(a);return true}function STSNavigate2Real(b,a){Nav.navigate(a);return true}function OnClickFilterV4(i,f,g){var d=ListModule.Util.findSTSMenuTable(i,"CTXNum"),c=FindClvp(i),h="Asc",j="Desc";if(d!=null&&d.getAttribute("SortFields")!=null){if(c!=null)c.ctx.operationType=SPListOperationType.Sort;var a=d.getAttribute("SortFields");if(a.indexOf("?")>0)a=a.substr(a.indexOf("?")+1);var b=ListModule.Util.getUrlWithNoSortParameters(a);b=ListModule.Util.removePagingArgs(b);if(b.indexOf("?")<0)b+="?";else b+="&";if(Boolean(f)&&Boolean(g)){var e=new URI(a);e.setQueryParameter("SortDir",f);e.setQueryParameter("SortField",g);a=e.getQuery()}b=b+a;if(c!=null)b+=getFilterQueryParam(c.ctx.queryString);if(c!=null&&c.ctx.IsClientRendering){if(c.rootFolder!=null)b=SetUrlKeyValue("RootFolder",c.rootFolder,true,b);c.ctx.queryString=b;c.RefreshPaging(b);if(a.substring(a.length-3)==h)d.setAttribute("SortFields",a.substring(0,a.length-3)+j);else d.setAttribute("SortFields",a.substring(0,a.length-4)+h)}else ListModule.Settings.SupportsNonCSR&&SubmitFormPost(b)}return false}function HandleFilterReal(e,b,d){var a=CLVPFromEventReal(e);if(a!=null&&a.ctx!=null)a.ctx.operationType=d;if(ListModule.Settings.SupportsNonCSR)if(a==null||a.ctx==null||!a.ctx.IsClientRendering){SubmitFormPost(b);return false}var c=a.ctx;if(c!=null&&c.ListSchema!=null){if(c.ListSchema.IsDocLib)WriteDocEngagementLog("Documents_ColumnFilterClick","OneDrive_ColumnFilterClick");else WriteDocEngagementLog("ListFilterClick","OneDrive_ListFilterClick");if(c.ListData!=null&&(c.ListSchema.Filter=="1"||Boolean(c.ListData.FilterLink))&&b.indexOf("&FilterClear=1")>0){ListModule.Settings.SupportsNonCSR&&SubmitFormPost(b);return false}}if((Flighting.VariantConfiguration.IsExpFeatureClientEnabled(168)||Flighting.VariantConfiguration.IsExpFeatureClientEnabled(424)&&window.groupContextData!=null)&&a.rootFolder!=null)b=SetUrlKeyValue("RootFolder",a.rootFolder,true,b);a.RefreshPaging(b);a.ctx.queryString=b;return true}function RefreshInplViewUrlByContext(a){var b=CLVPFromCtx(a);return RefreshInplViewUrlInternal(b)}function RefreshInplViewUrl(b){var a=CLVPFromEventReal(b);return RefreshInplViewUrlInternal(a)}function RefreshInplViewUrlInternal(a){return a==null?false:a.RefreshInplViewUrl()}function CancelRefreshViewByContext(a){var b=CLVPFromCtx(a);return CancelRefreshViewInternal(b)}function CancelRefreshView(b){var a=CLVPFromEventReal(b);return CancelRefreshViewInternal(a)}function CancelRefreshViewInternal(a){return a==null?false:a.CancelAnyOutstandingRequest()}function HandleRefreshViewByContext(c,b){var a=CLVPFromCtx(c);if(a==null)return false;if(Boolean(b))a.rgpaging=[];HandleRefreshViewInternal(a);return false}function HandleRefreshView(b){var a=CLVPFromEventReal(b);if(a==null)return false;HandleRefreshViewInternal(a);return false}function HandleRefreshViewInternal(c){var a=c.ctx.queryString,b=c.ctx;a=FixUrlFromClvp2(c,a,false);if(typeof b.searchTerm!="undefined"&&b.searchTerm!=null)a=ListModule.Util.removePagingArgs(a);if(ListModule.Settings.SupportsNonCSR)if(b==null||!b.IsClientRendering){SubmitFormPost(a);return}c.RefreshPaging(a)}function InitAllClvps(){InitCLVPs()}function ExpGroup(b,a){if(ListModule.Settings.SupportsGrouping){_ExpGroup(b,a);return}}function DeleteSelectedItems(a){ListModule.Settings.SupportsItemDelete&&_DeleteSelectedItems(a)}function DeleteSelectedItemsCore(d,e,c,b,a){ListModule.Settings.SupportsItemDelete&&_DeleteSelectedItemsCore(d,e,c,b,a)}function CheckOutSingleItem(a,b){ListModule.Settings.SupportsCheckout&&_CheckOutSingleItem(a,b)}function CheckInSingleItemFromECB(b,a,c){ListModule.Settings.SupportsCheckout&&_CheckInSingleItemFromECB(b,a,c)}function CheckinSelectedItems(a){if(ListModule.Settings.SupportsCheckout){if(!(window.OffSwitch==null||OffSwitch.IsActive("E66BFA46-2098-42AE-B4F3-BE9FB166FC43"))){var f=a.clvp,b=ListModule.Util.getSelectedItemsDict(a),g=_CountDictionary(b),c,e;if(g==1)for(e in b){c=b[e];var d=f.GetEcbInfo(c.id);if(d==null)ListModule.Util.fetchEcbInfo(a,c.id,"DIV",CheckInSingleItem);else CheckInSingleItem(a,d);return}}_CheckinSelectedItems(a)}}function CheckoutSelectedItems(a){ListModule.Settings.SupportsCheckout&&_CheckoutSelectedItems(a)}function DiscardCheckoutSelectedItems(a){ListModule.Settings.SupportsCheckout&&_DiscardCheckoutSelectedItems(a)}function RestoreAllClvpsNavigation(){EnumCLVPs(RestoreClvpNavigation)}function CLVPFromCtx(a,b){Boolean(b)&&EnsureCLVP(a);return typeof a.clvp!="undefined"?a.clvp:null}function EnsureCLVP(a){if(typeof a.clvp=="undefined"){a.clvp=new CLVP(a);a.clvp.Init()}}function CLVPFromEventReal(a){return a==null?null:typeof a.currentCtx!="undefined"&&Boolean(a.currentCtx)?CLVPFromCtx(a.currentCtx,true):typeof CLVPFromEventToolbar=="function"?CLVPFromEventToolbar(a):null}function FindClvp(c){if(typeof standaloneCtx!="undefined"){var b=standaloneCtx;if(!Boolean(b.clvp)){b.clvp=new CLVP(b);b.clvp.Init()}return b.clvp}else{var a=c;while(a!=null){if(a.tagName=="TABLE")if(a.clvp!=null)break;a=a.parentNode}return a!=null?a.clvp:null}}function getFilterQueryParam(d){if(d==null||d=="")return"";var c="",b=0,a;do{b++;a=d.match(RegExp("FilterField"+String(b)+"=[^&]*&FilterValue"+String(b)+"=[^&]*"));if(a!=null)c=c+"&"+a[0]}while(a!=null);b=0;do{b++;a=d.match(RegExp("FilterFields"+String(b)+"=[^&]*&FilterValues"+String(b)+"=[^&]*"));if(a!=null)c=c+"&"+a[0]}while(a!=null);b=0;do{b++;a=d.match(RegExp("FilterOp"+String(b)+"=[^&]*&FilterLookupId"+String(b)+"=[^&]*&FilterData"+String(b)+"=[^&]*"));if(a!=null)c=c+"&"+a[0]}while(a!=null);return c}function EnumCLVPs(callback){var fRet=false;if(typeof g_ViewIdToViewCounterMap!="undefined"){var vid;for(vid in g_ViewIdToViewCounterMap){var ctxT;eval("ctxT = ctx"+g_ViewIdToViewCounterMap[vid]+";");var clvp=ctxT.clvp;if(clvp!=null){callback(clvp);fRet=true}}}return fRet}function RestoreClvpNavigation(a){a.RestoreNavigation()}function CheckInSingleItem(a,b){ListModule.Settings.SupportsCheckout&&_CheckInSingleItem(a,b,true)}function AttachFile(a){ListModule.Settings.SupportsFileAttach&&_AttachFile(a)}function ManageCopies(a){ListModule.Settings.SupportsCopies&&_ManageCopies(a)}function ModerateSelectedItems(a){ListModule.Settings.SupportsModeration&&_ModerateSelectedItems(a)}function CanNavigateUp(a){if(a==null||a.clvp==null)return false;var b=URI.decodeURIComponent(ListModule.Util.getRootFolder2(a));return b==null||b==URI.decodeURIComponent(a.listUrlDir)?false:true}function NavigateUp(c){if(!CanNavigateUp(c))return;var b=URI.decodeURIComponent(ListModule.Util.getRootFolder2(c));if(b==null)return;var e=b.lastIndexOf("/"),d="";if(e>0)d=b.substr(0,e);else return;var a=Nav.ajaxNavigate.get_href(),f=c.view;a=URI.removeParameters(a);a=SetUrlKeyValue("RootFolder",d,true,a);a=SetUrlKeyValue("View",f,false,a);if(ListModule.Settings.SupportsSubmitFormPost){EnsureScriptFunc("clienttemplates.js","fMaintainUserChrome",function(){if(fMaintainUserChrome())a=SetUrlKeyValue("MaintainUserChrome","true",false,a)});_SubmitFormPost(a)}else Nav.navigate(a)}$_global_inplview();